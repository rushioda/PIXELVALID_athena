<?xml version="1.0"?>
<!DOCTYPE unifiedTestConfiguration SYSTEM "http://www.hep.ucl.ac.uk/atlas/AtlasTesting/DTD/unifiedTestConfiguration.dtd">

<unifiedTestConfiguration>
  
  <atn>
    
    <TEST name="aaaempty" type="athena" suite="aaaempty">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5 ; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py  RecExRecoTest/RecExRecoTest_RTT_empty.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="forward" type="athena" suite="forward">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5 ; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_forwarddet.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="calo" type="athena" suite="calo">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5 ; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_calo.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="id" type="athena" suite="id">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5 ; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_id.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="muon" type="athena" suite="muon">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_muon.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="idmuon" type="athena" suite="idmuon">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_idmuon.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="idcalo" type="athena" suite="idcalo">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_idcalo.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="idmuoncalo" type="athena" suite="idmuoncalo">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_idmuoncalo.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="idcaloegamma" type="athena" suite="idcaloegamma">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_idcaloegamma.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="idmuoncalomuoncomb" type="athena" suite="idmuoncalomuoncomb">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_idmuoncalomuoncomb.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="calomax" type="athena" suite="calomax">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5 ; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_calomax.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlsa.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="idmuonmax" type="athena" suite="idmuonmax">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_idmuonmax.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="idcalomax" type="athena" suite="idcalomax">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_idcalomax.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="RECOSHIFT_esd" type="athena" suite="esd">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True " AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_esd.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
    </TEST>
    
    <TEST name="esdtoesd" type="athena" suite="esd">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True ; rec.noESDTrigger=True " AthenaCommon/MemTraceInclude.py RecExCommon/esdtoesd.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
    </TEST>
    
    <TEST name="esdtoesdwithreco" type="athena" suite="esd">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=5; rec.doDetailedAuditor=True ; rec.doNameAuditor=True ; rec.noESDTrigger=True ; rec.doESD.set_Value_and_Lock(True) ; jp.AthenaCommonFlags.PoolESDOutput='reco_ESD.pool.root' " AthenaCommon/MemTraceInclude.py RecExCommon/esdtoesd.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
    </TEST>
    
    <TEST name="RECOSHIFT_esdzpileup" type="athena" suite="esdpileup">
      <options_atn>-c "jp.AthenaCommonFlags.EvtMax=2; jp.AthenaCommonFlags.SkipEvents=3 ; rec.AutoConfiguration=['everything']; rec.doDetailedAuditor=True ; rec.doNameAuditor=True ; jp.AthenaCommonFlags.PoolRDOInput=['root://eosatlas//eos/atlas/user/a/atlaspmb/mc/mc15_13TeV.110401.PowhegPythia_P2012_ttbar_nonallhad.recon.RDO.e4032_s2608_s2183_r7011/RDO.06336725._000001.pool.root.1']" AthenaCommon/MemTraceInclude.py RecExRecoTest/RecExRecoTest_RTT_esdlowlumi.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>RecExCommon_links.sh</prescript>
      <prescript>source ${ATN_PACKAGE}/test/atlascerngroupdisk_enviro.sh</prescript>
    </TEST>
    
    <TEST name="rawtoesd_data_notrig" type="athena" suite="RecRecoData">
      <options_atn>-c 'jp.AthenaCommonFlags.FilesInput=["/afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/data12_8TeV/data12_8TeV.00209109.physics_JetTauEtmiss.merge.RAW._lb0186._SFO-1._0001.1"];rec.doTrigger.set_Value_and_Lock(False);rec.doDPD.set_Value_and_Lock(True);rec.doNameAuditor=True;jp.AthenaCommonFlags.PoolESDOutput="data_ESD.pool.root"' RecExCommon/rdotoesdnotrigger.py</options_atn>
      <timelimit>30</timelimit>
      <author> Xiaohu Sun </author>
      <mailto> atlas.rig@cern.ch </mailto>
      <prescript>rm -f $ATN_WORK_AREA/*.pool.root; env > env.txt</prescript>
    </TEST>
    
  </atn>
  
  <kv/>
  
  <rtt xmlns="http://www.hep.ucl.ac.uk/atlas/AtlasTesting/rtt">
    <rttContactPerson>Xiaohu Sun (Xiaohu.Sun@cern.ch)</rttContactPerson>
    <mailto>atlas.rig@cern.ch</mailto>
    <refRelease>10.0.0</refRelease>
    
    <jobList>
      <classification>
	<displayClass>OfflineValidation</displayClass>
	<displayProcess>Reco</displayProcess>
	<displayComponent>Det-Combined</displayComponent>
      </classification>
      
      <!-- XS: please update to mc15 -->
      <athena userJobId="mc12_emptyReco">
	<doc>Test almost empty event loop on default MC12 </doc>
	<commandLineFlags>
          jp.AthenaCommonFlags.EvtMax=300;jp.AthenaCommonFlags.FilesInput=["root://eosatlas//eos/atlas/atlascerngroupdisk/phys-rig/pileupSamples/mc12_8TeV.105200.McAtNloJimmy_CT10_ttbar_LeptonFilter.digit.RDO.e1513_s1499_s1504_d700/RDO.01177879._000001.pool.root.1"]
        </commandLineFlags>
	<options>RecExRecoTest_RTT_empty</options>
	<group>RecExCommon</group>
	<queue>long</queue>
      </athena>
      
      <athena userJobId="mc12_idReco">
	<doc>Test reco only ID only on default MC12 </doc>
	<commandLineFlags>
          jp.AthenaCommonFlags.EvtMax=300;jp.AthenaCommonFlags.FilesInput=["root://eosatlas//eos/atlas/atlascerngroupdisk/phys-rig/pileupSamples/mc12_8TeV.105200.McAtNloJimmy_CT10_ttbar_LeptonFilter.digit.RDO.e1513_s1499_s1504_d700/RDO.01177879._000001.pool.root.1"]
        </commandLineFlags>
	<options>RecExRecoTest_RTT_id</options>
	<group>RecExCommon</group>
	<queue>long</queue>
      </athena>
      
      <athena userJobId="mc12_caloReco">
	<doc>Test reco only calo only on default MC12 </doc>
	<commandLineFlags>
          jp.AthenaCommonFlags.EvtMax=300;jp.AthenaCommonFlags.FilesInput=["root://eosatlas//eos/atlas/atlascerngroupdisk/phys-rig/pileupSamples/mc12_8TeV.105200.McAtNloJimmy_CT10_ttbar_LeptonFilter.digit.RDO.e1513_s1499_s1504_d700/RDO.01177879._000001.pool.root.1"]
        </commandLineFlags>
	<options>RecExRecoTest_RTT_calo</options>
	<group>RecExCommon</group>
	<queue>long</queue>
      </athena>
      
      <athena userJobId="mc12_muonReco">
	<doc>Test reco only muon only on default MC12 </doc>
	<commandLineFlags>
          jp.AthenaCommonFlags.EvtMax=300;jp.AthenaCommonFlags.FilesInput=["root://eosatlas//eos/atlas/atlascerngroupdisk/phys-rig/pileupSamples/mc12_8TeV.105200.McAtNloJimmy_CT10_ttbar_LeptonFilter.digit.RDO.e1513_s1499_s1504_d700/RDO.01177879._000001.pool.root.1"]
        </commandLineFlags>
	<options>RecExRecoTest_RTT_muon</options>
	<group>RecExCommon</group>
	<queue>long</queue>
      </athena>
      
      <athena userJobId="mc12_outputlevel_debugReco">
	<doc>Test reco with outputlevel debug to check length of logfile and number of messages</doc>
	<commandLineFlags>
          jp.AthenaCommonFlags.EvtMax=50;rec.doWriteESD=False;rec.OutputLevel=DEBUG;rec.doFloatingPointException=True;jp.AthenaCommonFlags.FilesInput=["root://eosatlas//eos/atlas/atlascerngroupdisk/phys-rig/pileupSamples/mc12_8TeV.105200.McAtNloJimmy_CT10_ttbar_LeptonFilter.digit.RDO.e1513_s1499_s1504_d700/RDO.01177879._000001.pool.root.1"]
        </commandLineFlags>
	<options>RecExRecoTest_RTT_esd</options>
	<group>RecExCommon</group>
	<queue>long</queue>
	<action position="8" runInAtlasEnv="yes">
	  <modulename>RttLibraryTools</modulename>
	  <testname>ExeRunner</testname>
	  <arg>
	    <argname>exeName</argname>
	    <argvalue>tail</argvalue>
	  </arg>
	  <arg>
	    <argname>exeParamString</argname>
	    <argvalue>--lines=500 mc12_outputlevel_debugReco_log &gt; mc12_outputlevel_debugReco_log.txt</argvalue>
	  </arg>
	</action>
	<action position="9" runInAtlasEnv="yes">
	  <modulename>RttLibraryTools</modulename>
	  <testname>ExeRunner</testname>
	  <arg>
	    <argname>exeName</argname>
	    <argvalue>bzip2</argvalue>
	  </arg>
	  <arg>
	    <argname>exeParamString</argname>
	    <argvalue>mc12_outputlevel_debugReco_log</argvalue>
	  </arg>
	</action>
	<alwaysRunPostProc />
      </athena>
      
      <athena userJobId="mc12_outputlevel_verboseReco">
	<doc>Test reco with outputlevel verbose to check length of logfile and number of messages</doc>
	<commandLineFlags>
          jp.AthenaCommonFlags.EvtMax=50;rec.doWriteESD=False;rec.OutputLevel=VERBOSE;rec.doFloatingPointException=True;jp.AthenaCommonFlags.FilesInput=["root://eosatlas//eos/atlas/atlascerngroupdisk/phys-rig/pileupSamples/mc12_8TeV.105200.McAtNloJimmy_CT10_ttbar_LeptonFilter.digit.RDO.e1513_s1499_s1504_d700/RDO.01177879._000001.pool.root.1"]
        </commandLineFlags>
	<options>RecExRecoTest_RTT_esd</options>
	<group>RecExCommon</group>
	<queue>long</queue>
	<action position="8" runInAtlasEnv="yes">
	  <modulename>RttLibraryTools</modulename>
	  <testname>ExeRunner</testname>
	  <arg>
	    <argname>exeName</argname>
	    <argvalue>tail</argvalue>
	  </arg>
	  <arg>
	    <argname>exeParamString</argname>
	    <argvalue>--lines=500 mc12_outputlevel_verboseReco_log &gt; mc12_outputlevel_verboseReco_log.txt</argvalue>
	  </arg>
	</action>
	<action position="9" runInAtlasEnv="yes">
	  <modulename>RttLibraryTools</modulename>
	  <testname>ExeRunner</testname>
	  <arg>
	    <argname>exeName</argname>
	    <argvalue>bzip2</argvalue>
	  </arg>
	  <arg>
	    <argname>exeParamString</argname>
	    <argvalue>mc12_outputlevel_verboseReco_log</argvalue>
	  </arg>
	</action>
	<alwaysRunPostProc />
      </athena>
      
      <jobTransform userJobId="data11_7TeV_esdReco">
	<doc>Test reco up to ESD on high_mu data11</doc>
	<jobTransformJobName>RecExRecoTest_RTT_data11_7TeV_high_mu</jobTransformJobName>
	<jobTransformCmd>
	  athena.py -c 'jp.AthenaCommonFlags.EvtMax=-1;jp.AthenaCommonFlags.FilesInput=["/afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/high_mu-data11_7TeV.00179725.physics_JetTauEtmiss.merge.RAW._lb0021.data"];rec.doNameAuditor=True' RecExCommon/rdotoesdnotrigger.py
	</jobTransformCmd>
	<group>RecExReco</group>
	<queue>long</queue>
      </jobTransform>
      
      <jobTransform userJobId="data12_8TeV_esdReco">
	<doc>Test reco up to ESD on high_mu data12</doc>
	<jobTransformJobName>RecExRecoTest_RTT_data12_7TeV_high_mu</jobTransformJobName>
	<jobTransformCmd>
	  athena.py -c 'jp.AthenaCommonFlags.EvtMax=-1;jp.AthenaCommonFlags.FilesInput=["/afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/data12_8TeV/data12_8TeV.00209109.physics_JetTauEtmiss.merge.RAW._lb0186._SFO-1._0001.1"];rec.doNameAuditor=True' RecExCommon/rdotoesdnotrigger.py
	</jobTransformCmd>
	<group>RecExReco</group>
	<queue>long</queue>
      </jobTransform>
      
    </jobList>
    
    <jobGroups>
      <jobGroup name="AthenaRecExCommon" parent="Athena">
	<keepFilePattern>*.root</keepFilePattern>
	<keepFilePattern>*.perfmon.pdf</keepFilePattern>
	<keepFilePattern>*.perfmon.summary.txt</keepFilePattern>
	<keepFilePattern>*.pmon.gz</keepFilePattern>
	<keepFilePattern>*.txt</keepFilePattern>
	<keepFilePattern>*.bz2</keepFilePattern>
	<keepFilePattern>logExtract.txt</keepFilePattern>
	<keepFilePattern>memoryLeak.txt</keepFilePattern>
	<keepFilePattern>SGAud*.out</keepFilePattern>
	<keepFilePattern>dumprootfile.*.log.gz</keepFilePattern>

	<auxFilePattern>slurpRecoRTTTests.pl</auxFilePattern>
	<auxFilePattern>dumpPoolFileInchunks.sh</auxFilePattern>
	<auxFilePattern>diffPoolFilesRERT.sh</auxFilePattern>
	
	<action position="1" runInAtlasEnv="yes">
	  <modulename>PostProcessRecoRTTTests</modulename>
	  <testname>PostProcessRecoRTTTests</testname>
	</action>
      </jobGroup>
      
      <jobGroup name="RecExReco" parent="Transform">
	<keepFilePattern>data/*</keepFilePattern>
	<keepFilePattern>igprof.*.gz</keepFilePattern>
	
	<keepFilePattern>*.root</keepFilePattern>
	<keepFilePattern>dumprootfile.*.log.gz</keepFilePattern>
	
	<keepFilePattern>*.txt</keepFilePattern>
	<keepFilePattern>*.bz2</keepFilePattern>
	<keepFilePattern>*.html</keepFilePattern>
	<keepFilePattern>*_log.bz2</keepFilePattern> 
	
	<auxFilePattern>run_memleak_rert.sh</auxFilePattern>
	<auxFilePattern>slurpRecoRTTTests.pl</auxFilePattern>
	<auxFilePattern>dumpPoolFileInchunks.sh</auxFilePattern>
	<auxFilePattern>diffPoolFilesRERT.sh</auxFilePattern>
	
	<action position="1">
	  <modulename>PostProcessRecoRTTTests</modulename>
	  <testname>PostProcessRecoRTTTests</testname>
	</action>
	
      </jobGroup>
    </jobGroups>
    
  </rtt>
</unifiedTestConfiguration>
