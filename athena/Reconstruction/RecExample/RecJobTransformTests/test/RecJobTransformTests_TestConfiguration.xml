<?xml version="1.0"?>
<!DOCTYPE unifiedTestConfiguration SYSTEM "http://www.hep.ucl.ac.uk/atlas/AtlasTesting/DTD/unifiedTestConfiguration.dtd">

<unifiedTestConfiguration>
    <atn>
    
        <!-- ++++++++++++++++++++++++++ Running on Simulated Data  +++++++++++++++++++++++++++++++++++++++++++++ -->
    
        <!-- MC15 type digitization and reconstruction of 13 TeV MC with pileup -->
        <TEST name="RECOSHIFT_Reco_MC15_13TeV" type="script" suite="reco_tf">
            <options_atn>
                export TRF_ECHO=True; 
                Reco_tf.py  '--inputHITSFile=/afs/cern.ch/atlas/project/rig/referencefiles/mc15/valid1.410000.PowhegPythiaEvtGen_P2012_ttbar_hdamp172p5_nonallhad.simul.HITS.e4993_s2887_tid08170896_00/HITS.08170896._001944.pool.root.1' '--jobNumber=64' '--maxEvents=10' '--postInclude=RecJobTransforms/UseFrontier.py' '--preExec' 'rec.Commissioning.set_Value_and_Lock(True);from AthenaCommon.BeamFlags import jobproperties;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(20.0);from LArROD.LArRODFlags import larRODFlags;larRODFlags.nSamples.set_Value_and_Lock(4);larRODFlags.firstSample.set_Value_and_Lock(0);larRODFlags.useHighestGainAutoCorr.set_Value_and_Lock(True)' 'RAWtoESD:from CaloRec.CaloCellFlags import jobproperties;jobproperties.CaloCellFlags.doLArCellEmMisCalib=False' 'ESDtoAOD:TriggerFlags.AODEDMSet="AODFULL"' 'RAWtoESD:from InDetRecExample.InDetJobProperties import InDetFlags; InDetFlags.doSlimming.set_Value_and_Lock(False)' 'ESDtoAOD:from InDetRecExample.InDetJobProperties import InDetFlags; InDetFlags.doSlimming.set_Value_and_Lock(False)' 'RDOtoRDOTrigger:from TriggerJobOpts.TriggerFlags import TriggerFlags;TriggerFlags.triggerMenuSetup="MC_pp_v6_tight_mc_prescale"' '--skipEvents=0' '--autoConfiguration=everything' '--conditionsTag=OFLCOND-MC15c-SDR-09' '--geometryVersion=ATLAS-R2-2015-03-01-00' '--digiSeedOffset1=1' '--digiSeedOffset2=1'  '--steering=doRDO_TRIG'  '--outputAODFile=AOD.pool.root' '--outputRDOFile=RDO.pool.root' '--outputESDFile=ESD.pool.root'  --runNumber="110401" --pileupFinalBunch 6 --inputHighPtMinbiasHitsFile="/afs/cern.ch/atlas/project/rig/referencefiles/mc15_minBias/mc15_13TeV.361035.Pythia8EvtGen_A2MSTW2008LO_minbias_inelastic_high.merge.HITS.e3581_s2578_s2195/HITS.05608152._002335.pool.root.1" --inputLowPtMinbiasHitsFile="/afs/cern.ch/atlas/project/rig/referencefiles/mc15_minBias/mc15_13TeV.361034.Pythia8EvtGen_A2MSTW2008LO_minbias_inelastic_low.merge.HITS.e3581_s2578_s2195/HITS.05608147._000125.pool.root.1"
            </options_atn>
            <timelimit>60</timelimit>	
            <author>Xiaohu Sun, Carl Gwilliam and Marie-Helene Genest</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>    
    
        <TEST name="RecoTf_MC15_no" type="script" suite="reco_tf">
            <options_atn>
                export TRF_ECHO=True; Reco_tf.py --inputRDOFile /afs/cern.ch/atlas/project/rig/referencefiles/mc15/RDO.pool.root --maxEvents 5 --autoConfiguration everything --preExec 'rec.doDetailedAuditor=True' 'rec.doNameAuditor=True' 'rec.doCalo=False' 'rec.doInDet=False' 'rec.doMuon=False' 'rec.doJetMissingETTag=False' 'rec.doEgamma=False' 'rec.doMuonCombined=False' 'rec.doTau=False' 'rec.doTrigger=False' --outputESDFile my.ESD.pool.root
            </options_atn>
            <timelimit>30</timelimit>
            <author>David Rousseau</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>

        <TEST name="RecoTf_MC15" type="script" suite="reco_tf">
            <options_atn>
                export TRF_ECHO=True; Reco_tf.py --inputRDOFile /afs/cern.ch/atlas/project/rig/referencefiles/mc15/RDO.pool.root --maxEvents 5 --autoConfiguration everything --preExec 'rec.doDetailedAuditor=True' 'rec.doNameAuditor=True' --outputESDFile my.ESD.pool.root
            </options_atn>
            <timelimit>30</timelimit>
            
            <author>David Rousseau</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>
    
        <!-- ++++++++++++++++++++++++++ Running on Cosmics Data  +++++++++++++++++++++++++++++++++++++++++++++ -->
    
        <!-- XS: please update with new 2015 cosmics file: cosmics 2015 reconstruction -->
        <TEST name="RecoTf_cosmic_data_2011" type="script" suite="Reco_tf">
            <options_atn>
                export TRF_ECHO=True; Reco_tf.py --inputBSFile /afs/cern.ch/atlas/project/rig/data/data11_cos.00193024.physics_CosmicCalo.merge.RAW/data11_cos.00193024.physics_CosmicCalo.merge.RAW._lb0096._SFO-ALL._0001.1 --maxEvents 10 --autoConfiguration everything --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputHISTFile myHIST.root --preExec 'rec.doDetailedAuditor=True' 'rec.doNameAuditor=True' 
            </options_atn>
            <timelimit>60</timelimit>
            <author>Jamie Boyd</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>
    
        <!-- ++++++++++++++++++++++++++ Running on highmu Data  +++++++++++++++++++++++++++++++++++++++++++++ -->
    
        <!-- ++++++++++++++++++++++++++ Running on 7TeV collision data  +++++++++++++++++++++++++++++++++++++++++++++ -->
    
        <!-- data11_7TeV reconstruction -->
        <TEST name="RECOSHIFT_RecoTf_7TeV_data" type="script" suite="Reco_tf">
            <options_atn> 	
                export TRF_ECHO=True; Reco_tf.py --inputBSFile /afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/high_mu-data11_7TeV.00179725.physics_JetTauEtmiss.merge.RAW._lb0021.data --autoConfiguration everything --conditionsTag="COMCOND-BLKPA-RUN1-07" --maxEvents 5 --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --outputHISTFile myHist.root --preExec 'rec.doDetailedAuditor=True' 'rec.doNameAuditor=True' 'rec.doTrigger=False'
            </options_atn>
            <timelimit>60</timelimit>
            <author>Jamie Boyd</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>
    
        <!-- ++++++++++++++++++++++++++ Running on 8TeV collision data  +++++++++++++++++++++++++++++++++++++++++++++ -->
        <!-- data12_8TeV reconstruction, all reco switched off -->
        <TEST name="Reco_tf_8TeV_data_no" type="script" suite="reco_trf">
            <options_atn>        
                export TRF_ECHO=True; Reco_tf.py --inputBSFile /afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/data12_8TeV/data12_8TeV.00209109.physics_JetTauEtmiss.merge.RAW._lb0186._SFO-1._0001.1 --maxEvents 5 --autoConfiguration everything --preExec 'rec.doCalo=False' 'rec.doInDet=False' 'rec.doMuon=False' 'rec.doJetMissingETTag=False' 'rec.doEgamma=False' 'rec.doMuonCombined=False' 'rec.doTau=False' 'rec.doTrigger=False' 'rec.doDetailedAuditor=True' 'rec.doNameAuditor=True' --outputESDFile my.ESD.pool.root  
            </options_atn>
            <timelimit>30</timelimit>
            <author>David Rousseau</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>
    
        <!-- data12_8TeV reconstruction -->
        <TEST name="RECOSHIFT_RecoTf_8TeV_data" type="script" suite="Reco_tf">
            <options_atn>
                export TRF_ECHO=True; Reco_tf.py --inputBSFile /afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/data12_8TeV/data12_8TeV.00209109.physics_JetTauEtmiss.merge.RAW._lb0186._SFO-1._0001.1 --autoConfiguration everything --conditionsTag="COMCOND-BLKPA-RUN1-07" --maxEvents 5 --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --outputHISTFile myHist.root --preExec 'rec.doDetailedAuditor=True' 'rec.doNameAuditor=True' 'rec.doTrigger=False'
            </options_atn>
            <timelimit>60</timelimit>
            <author>Jamie Boyd</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>
    
        <!-- q-test 220 reconstruction -->
        <TEST name="RECOSHIFT_RecoTf_q220" type="script" suite="Reco_tf">
            <options_atn>
                export TRF_ECHO=True; Reco_tf.py --AMIConfig=q220 --preExec 'rec.doDetailedAuditor=True' 'rec.doNameAuditor=True' 'DQMonFlags.doCTPMon=False'
            </options_atn>
            <timelimit>60</timelimit>
            <author>RIG Convenors</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>

        <!-- q-test 221 reconstruction -->
        <TEST name="RECOSHIFT_RecoTf_q221" type="script" suite="Reco_tf">
            <options_atn>
                export TRF_ECHO=True; Reco_tf.py --AMIConfig=q221 --preExec 'rec.doDetailedAuditor=True' 'rec.doNameAuditor=True'
            </options_atn>
            <timelimit>60</timelimit>
            <author>RIG Convenors</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>

        <!-- q-test 222 reconstruction -->
        <TEST name="RECOSHIFT_RecoTf_q222" type="script" suite="Reco_tf">
            <options_atn>
                export TRF_ECHO=True; Reco_tf.py --AMIConfig=q222 --preExec 'rec.doDetailedAuditor=True' 'rec.doNameAuditor=True' 'DQMonFlags.doCTPMon=False' 'DQMonFlags.doHLTMon=False'
            </options_atn>
            <timelimit>60</timelimit>
            <author>RIG Convenors</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>
    
        <!-- q-test 223 reconstruction -->
        <TEST name="RECOSHIFT_RecoTf_q223" type="script" suite="Reco_tf">
            <options_atn>
                export TRF_ECHO=True; Reco_tf.py --AMIConfig=q223 --preExec 'rec.doDetailedAuditor=True' 'rec.doNameAuditor=True' 'DQMonFlags.doCTPMon=False'
            </options_atn>
            <timelimit>60</timelimit>
            <author>RIG Convenors</author>
            <prescript>rm -f $ATN_WORK_AREA/*</prescript>
            <expectations>
                <errorMessage>FAILURE </errorMessage>
                <returnValue>0</returnValue>
            </expectations>
        </TEST>
    </atn>
  
    <kv>
        <kvtest name='RecoZeeJet' enabled='true'>
            <release>ALL</release>
            <priority>40</priority>
            <kvsuite>CSC</kvsuite>
            <trf>Reco_tf.py</trf>
            <desc>Z -> e e jet Reconstruction</desc>
            <author>Alessandro De Salvo [Alessandro.DeSalvo@roma1.infn.it]</author>
            <inpath>${T_DATAPATH}/MC12digitZeePyJT-${T_RELEASE}</inpath>
            <infile>${T_PREFIX}-MC12digitZeePyJT-${T_RELEASE}.pool.root</infile>
            <inpool>PoolFileCatalog.xml</inpool>
            <outpath>${T_DATAPATH}/RecoZeeJet-${T_RELEASE}</outpath>
            <outfile>${T_PREFIX}-RecoESDZeeJet-${T_RELEASE}.pool.root</outfile>
            <logfile>${T_PREFIX}-RecoZeeJet-${T_RELEASE}.log</logfile>
            <signature>
                --inputRDOFile "${T_INFILE}" --outputESDFile "${T_OUTFILE}" --outputAODFile "${T_PREFIX}-RecoAODZeeJet-${T_RELEASE}.pool.root"  --maxEvents 10 --autoConfiguration everything --conditionsTag="OFLCOND-RUN12-SDR-32" --postInclude KitValidation/kv_reflex.py
            </signature>
            <copyfiles>
                ${T_OUTFILE} ${T_PREFIX}-RecoAODZeeJet-${T_RELEASE}.pool.root ${T_LOGFILE} PoolFileCatalog.xml metadata.xml jobInfo.xml
            </copyfiles>
            <checkfiles>${T_OUTPATH}/${T_OUTFILE} ${T_OUTPATH}/${T_PREFIX}-RecoAODZeeJet-${T_RELEASE}.pool.root</checkfiles>
        </kvtest>
        <kvtest name='BM1recoTT' enabled='false'>
            <release>ALL</release>
            <priority>40</priority>
            <kvsuite>BM1</kvsuite>
            <trf>Reco_tf.py</trf>
            <desc>Benchmark[1] tt Reconstruction</desc>
            <author>Alessandro De Salvo [Alessandro.DeSalvo@roma1.infn.it]</author>
            <inpath>${T_DATAPATH}/BM1digitTT-${T_RELEASE}</inpath>
            <infile>${T_PREFIX}-BM1digitTT-${T_RELEASE}.pool.root</infile>
            <inpool>PoolFileCatalog.xml</inpool>
            <outpath>${T_DATAPATH}/BM1recoTT-${T_RELEASE}</outpath>
            <outfile>${T_PREFIX}-BM1recoESDTT-${T_RELEASE}.pool.root</outfile>
            <logfile>${T_PREFIX}-BM1recoTT-${T_RELEASE}.log</logfile>
            <signature>
                --inputRDOFile "${T_INFILE}" --outputESDFile "${T_OUTFILE}" --outputAODFile "${T_PREFIX}-BM1recoAODTT-${T_RELEASE}.pool.root"  --maxEvents 100 --autoConfiguration everything --postInclude KitValidation/kv_perfmon.py
            </signature>
            <copyfiles>
                ${T_OUTFILE} ${T_PREFIX}-BM1recoAODTT-${T_RELEASE}.pool.root ${T_LOGFILE} PoolFileCatalog.xml metadata.xml jobInfo.xml
            </copyfiles>
            <checkfiles>${T_OUTPATH}/${T_OUTFILE} ${T_OUTPATH}/${T_PREFIX}-BM1recoAODTT-${T_RELEASE}.pool.root</checkfiles>
        </kvtest>
    </kv>
  
  
    <rtt xmlns="http://www.hep.ucl.ac.uk/atlas/AtlasTesting/rtt">
    
        <rttContactPerson>Xiaohu Sun </rttContactPerson>
        <mailto>atlas.rig@cern.ch</mailto>
    
        <jobList>
      
            <classification>
                <displayClass>OfflineValidation</displayClass>
                <displayProcess>Reco</displayProcess>
                <displayComponent>Athena-Core</displayComponent>
            </classification>
      

            <jobTransform userJobId="mc16">
                <doc>Reco_tf runs on mc16, based on recon tag r9364 MC16a</doc>
                <jobTransformJobName>RecoTf_mc16</jobTransformJobName>
                <jobTransformCmd>
				Reco_tf.py --inputRDOFile=/eos/atlas/atlascerngroupdisk/phys-rig/MC16Samples/mc16_13TeV.410501.PowhegPythia8EvtGen_A14_ttbar_hdamp258p75_nonallhad.merge.RDO.e5458_s3126_d1437/RDO.11426804._000001.pool.root.1 --maxEvents=300 --autoConfiguration everything --conditionsTag=default:OFLCOND-MC16-SDR-16 --geometryVersion=default:ATLAS-R2-2016-01-00-01 --runNumber=410501 --preExec 'rec.doTrigger=False;' --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --outputHISTFile myHIST.root
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>
      
            <jobTransform userJobId="mc16_trigsplit">
                <doc>Reco_tf with split trigger runs on mc16</doc>
                <jobTransformJobName>RecoTf_trigsplit_mc16</jobTransformJobName>
                <jobTransformCmd>
				Reco_tf.py --inputRDOFile /eos/atlas/atlascerngroupdisk/phys-rig/MC16Samples/mc16_13TeV.410501.PowhegPythia8EvtGen_A14_ttbar_hdamp258p75_nonallhad.merge.RDO.e5458_s3126_d1437/RDO.11426804._000001.pool.root.1 --maxEvents 300 --autoConfiguration everything --conditionsTag=default:OFLCOND-MC16-SDR-16 --geometryVersion=default:ATLAS-R2-2016-01-00-01 --runNumber=410501 --steering RAWtoESD:in-RDO RAWtoESD:in-BS RAWtoESD:in+RDO_TRIG --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --outputHISTFile myHIST.root
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>
      
            <!-- Test runs on mc16 with Hephaestos-->
      
            <jobTransform userJobId="mc16_memleak">
                <doc>Reco_tf runs on mc16 with Hephaestos for memory leak checking</doc>
                <jobTransformJobName>RecoTf_memleak_mc16</jobTransformJobName>
                <jobTransformCmd>
				export LD_PRELOAD=$LCG_RELEASE_BASE/libunwind/5c2cade-76996/$LCG_PLATFORM/lib/libunwind.so; Reco_tf.py --inputRDOFile /eos/atlas/atlascerngroupdisk/phys-rig/MC16Samples/mc16_13TeV.410501.PowhegPythia8EvtGen_A14_ttbar_hdamp258p75_nonallhad.merge.RDO.e5458_s3126_d1437/RDO.11426804._000001.pool.root.1 --conditionsTag=default:OFLCOND-MC16-SDR-16 --geometryVersion=default:ATLAS-R2-2016-01-00-01 --runNumber=410501 --maxEvents 10 --outputESDFile myESD.pool.root --athenaopts '--stdcmalloc --leak-check-execute'
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>
      
            <jobTransform userJobId="Reco_MC15_13TeV_nopileup">
                <doc>Reco_tf for PhysVal, updated with q221 (2017-11-13), no pileup</doc>
                <jobTransformJobName>Reco_MC15_tf</jobTransformJobName>
                <jobTransformCmd>
				export TRF_ECHO=True; Reco_tf.py --conditionsTag all:OFLCOND-MC16-SDR-17 --ignoreErrors 'False' --autoConfiguration='everything' --digiSeedOffset2 '1'  --preExec  'all:rec.Commissioning.set_Value_and_Lock(True);from AthenaCommon.BeamFlags import jobproperties;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(0.);from LArROD.LArRODFlags import larRODFlags;larRODFlags.nSamples.set_Value_and_Lock(4);from TriggerJobOpts.TriggerFlags import TriggerFlags;TriggerFlags.AODEDMSet="AODFULL"'  'HITtoRDO:from Digitization.DigitizationFlags import digitizationFlags;digitizationFlags.overrideMetadata+=["PhysicsList"];'  'RAWtoESD:from TriggerJobOpts.TriggerFlags import TriggerFlags;TriggerFlags.triggerMenuSetup="MC_pp_v7";from CaloRec.CaloCellFlags import jobproperties;jobproperties.CaloCellFlags.doLArCellEmMisCalib=False;' --digiSeedOffset1 '1' --steering 'doRDO_TRIG' --DataRunNumber '222525' --outputRDOFile=myRDO.pool.root --outputTAGFile=myTAG.pool.root --outputAODFile=myAOD.pool.root --outputESDFile=myESD.pool.root --outputHISTFile=myHIST.root --inputHITSFile=/cvmfs/atlas-nightlies.cern.ch/repo/data/data-art/RecJobTransformTests/mc15_13TeV.410500.PowhegPythia8EvtGen_A14_ttbar_hdamp172p5_nonallhad.simul.HITS.e4797_s2726.50events.pool.root --imf False --maxEvents '500'
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>
      
            <chain>
                <chainName>PhysicsValidationMC15ChainJob13TeV</chainName>
                <sequential>
                    <!-- Run Reco -->
                    <chainElement>
                        <jobTransform userJobId="Reco_MC15_13TeV">
                            <doc>Reco_tf for PhysVal, updated with q221 (2017-11-13) + pileup</doc>
                            <jobTransformJobName>Reco_MC15_tf</jobTransformJobName>
                            <jobTransformCmd>
							export TRF_ECHO=True; Reco_tf.py --conditionsTag all:OFLCOND-MC16-SDR-17 --ignoreErrors 'False' --autoConfiguration='everything' --digiSeedOffset2 '1'  --preExec  'all:rec.Commissioning.set_Value_and_Lock(True);from AthenaCommon.BeamFlags import jobproperties;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(0.);from LArROD.LArRODFlags import larRODFlags;larRODFlags.nSamples.set_Value_and_Lock(4);from TriggerJobOpts.TriggerFlags import TriggerFlags;TriggerFlags.AODEDMSet="AODFULL"'  'HITtoRDO:from Digitization.DigitizationFlags import digitizationFlags;digitizationFlags.overrideMetadata+=["PhysicsList"];'  'RAWtoESD:from TriggerJobOpts.TriggerFlags import TriggerFlags;TriggerFlags.triggerMenuSetup="MC_pp_v7";from CaloRec.CaloCellFlags import jobproperties;jobproperties.CaloCellFlags.doLArCellEmMisCalib=False;' --digiSeedOffset1 '1' --steering 'doRDO_TRIG' --DataRunNumber '222525' --outputRDOFile=myRDO.pool.root --outputTAGFile=myTAG.pool.root --outputAODFile=myAOD.pool.root --outputESDFile=myESD.pool.root --outputHISTFile=myHIST.root --inputHITSFile=/cvmfs/atlas-nightlies.cern.ch/repo/data/data-art/RecJobTransformTests/mc15_13TeV.410500.PowhegPythia8EvtGen_A14_ttbar_hdamp172p5_nonallhad.simul.HITS.e4797_s2726.50events.pool.root --inputHighPtMinbiasHitsFile='/cvmfs/atlas-nightlies.cern.ch/repo/data/data-art/RecJobTransformTests/mc15_13TeV.361035.Pythia8EvtGen_A2MSTW2008LO_minbias_inelastic_high.merge.HITS.e3581_s2578_s2195/*' --inputLowPtMinbiasHitsFile='/cvmfs/atlas-nightlies.cern.ch/repo/data/data-art/RecJobTransformTests/mc15_13TeV.361034.Pythia8EvtGen_A2MSTW2008LO_minbias_inelastic_low.merge.HITS.e3581_s2578_s2195/*' --numberOfCavernBkg="0" --numberOfHighPtMinBias="0.12268057" --numberOfLowPtMinBias="39.8773194" --pileupFinalBunch 6 --imf False --maxEvents '500'
                            </jobTransformCmd>
                            <group>RecTrf</group>
                            <queue>long</queue>
                        </jobTransform>
                        <chainfileout>myAOD.pool.root</chainfileout>
                    </chainElement>
	  
                    <!-- Runs validation histogram code -->
                    <chainElement>
                        <jobTransform userJobId="PhysVal_MC15_13TeV_Example">
                            <doc>Reco_tf runs physcs validation as defined by Carl G/Marie-Helene G, May 7 2014</doc>
                            <jobTransformJobName>PhysVal_MC15_trf</jobTransformJobName>
                            <jobTransformCmd>
							export TRF_ECHO=True; Reco_tf.py --inputAODFile myAOD.pool.root --outputNTUP_PHYSVALFile PhysVal_13TeV_Example.pool.root --validationFlags doExample 
                            </jobTransformCmd>
                            <group>RecTrf</group>
                            <chaindataset_info>
                                <jobTransformData /> 
                                <chaindatasetName>myAOD.pool.root</chaindatasetName>
                                <dataset_info>
                                    <jobTransformData />
                                    <datasetName>/afs/cern.ch/atlas/project/rig/referencefiles/RTTinputFiles/MC15_13TeV/valid1.410000.PowhegPythiaEvtGen_P2012_ttbar_hdamp172p5_nonallhad.recon.AOD.e4993_s2887_r9044/AOD.10538155._000209.pool.root.1</datasetName>
                                </dataset_info>
                            </chaindataset_info>
                            <queue>long</queue>
                            <batchWallTime>300</batchWallTime>
                        </jobTransform>
                    </chainElement>
                    <chainElement>
                        <jobTransform userJobId="PhysVal_MC15_13TeV_All">
						<!-- add preExec and remove doTopoCluster ATLJETMET-774 -->
						<!-- add preExec to find the missing InDetPhysValFlags -->
						<!-- based on https://gitlab.cern.ch/atlas/athena/merge_requests/6771/diffs 2018-01-19 -->
                            <doc>Reco_tf runs physcs validation as defined by Carl G/Marie-Helene G, May 7 2014</doc>
                            <jobTransformJobName>PhysVal_MC15_trf</jobTransformJobName>
                            <jobTransformCmd>
							export TRF_ECHO=True; Reco_tf.py --validationFlags 'doExample,doMET,doPFlow,doTau,doEgamma,doBtag,doZee,doJet,doTopoCluster,doMuon,doTrigMinBias,doTrigIDtrk,doTrigBphys,doTrigMET,doTrigJet,doTrigTau, doTrigEgamma,doTrigMuon,doTrigBjet,doTrigHLTResult' --inputAODFile=myAOD.pool.root  --outputNTUP_PHYSVALFile=myNTUP_PHYSVAL.root
                            </jobTransformCmd>
                            <group>RecTrf</group>
                            <chaindataset_info>
                                <jobTransformData /> 
                                <chaindatasetName>myAOD.pool.root</chaindatasetName>
                                <dataset_info>
                                    <jobTransformData />
                                    <datasetName>/afs/cern.ch/atlas/project/rig/referencefiles/RTTinputFiles/MC15_13TeV/valid1.410000.PowhegPythiaEvtGen_P2012_ttbar_hdamp172p5_nonallhad.recon.AOD.e4993_s2887_r9044/AOD.10538155._000209.pool.root.1</datasetName>
                                </dataset_info>
                            </chaindataset_info>
                            <queue>long</queue>
                            <batchWallTime>300</batchWallTime>
                        </jobTransform>
                    </chainElement>
                </sequential>
            </chain>
      
            <jobTransform userJobId="Reco_MC15_13TeV_nopileup_stdcmalloc">
                <doc>Reco_tf for PhysVal, updated with q221 (2017-11-13), no pileup, with stdcmalloc</doc>
                <jobTransformJobName>Reco_MC15_tf</jobTransformJobName>
                <jobTransformCmd>
				export TRF_ECHO=True; Reco_tf.py --conditionsTag all:OFLCOND-MC16-SDR-17 --ignoreErrors 'False' --autoConfiguration='everything' --digiSeedOffset2 '1'  --preExec  'all:rec.Commissioning.set_Value_and_Lock(True);from AthenaCommon.BeamFlags import jobproperties;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(0.);from LArROD.LArRODFlags import larRODFlags;larRODFlags.nSamples.set_Value_and_Lock(4);from TriggerJobOpts.TriggerFlags import TriggerFlags;TriggerFlags.AODEDMSet="AODFULL"'  'HITtoRDO:from Digitization.DigitizationFlags import digitizationFlags;digitizationFlags.overrideMetadata+=["PhysicsList"];'  'RAWtoESD:from TriggerJobOpts.TriggerFlags import TriggerFlags;TriggerFlags.triggerMenuSetup="MC_pp_v7";from CaloRec.CaloCellFlags import jobproperties;jobproperties.CaloCellFlags.doLArCellEmMisCalib=False;' --digiSeedOffset1 '1' --steering 'doRDO_TRIG' --DataRunNumber '222525' --outputRDOFile=myRDO.pool.root --outputTAGFile=myTAG.pool.root --outputAODFile=myAOD.pool.root --outputESDFile=myESD.pool.root --outputHISTFile=myHIST.root --inputHITSFile=/cvmfs/atlas-nightlies.cern.ch/repo/data/data-art/RecJobTransformTests/mc15_13TeV.410500.PowhegPythia8EvtGen_A14_ttbar_hdamp172p5_nonallhad.simul.HITS.e4797_s2726.50events.pool.root --imf False --maxEvents '500' --athenaopts="--stdcmalloc"
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>


            <jobTransform userJobId="mc16_rdotobs">
                <doc>RDO to BS on tt mc16 </doc>
                <jobTransformJobName>RecoTf_RDOtoBS</jobTransformJobName>
                <jobTransformCmd>
				Reco_tf.py --inputRDOFile /eos/atlas/atlascerngroupdisk/phys-rig/MC16Samples/mc16_13TeV.410501.PowhegPythia8EvtGen_A14_ttbar_hdamp258p75_nonallhad.merge.RDO.e5458_s3126_d1437/RDO.11426804._000001.pool.root.1 --outputBSFile mc16_13TeV.410501.PowhegPythia8EvtGen_A14_ttbar_hdamp258p75_nonallhad.data --autoConfiguration everything --maxEvents 300 --conditionsTag=default:OFLCOND-MC16-SDR-16 --geometryVersion=default:ATLAS-R2-2016-01-00-01 --runNumber=410501
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
                <testToRemove> 
                    <jobGroupName>Transform</jobGroupName> 
                    <testidentifier>CheckFileRunner0</testidentifier> 
                </testToRemove> 
            </jobTransform>
      
      
            <!-- Test runs on Heavy Ion MC/Data -->
            <jobTransform userJobId="mc15_heavy_ion">
                <doc>heavy ion reconstruction test from Andrzej Olszewski and Iwona Grabowska-Bold</doc>
                <jobTransformJobName>HeavyIon_mc</jobTransformJobName>
                <jobTransformCmd>
                    export TRF_ECHO=True; Reco_tf.py --inputHITSFile=/cvmfs/atlas-nightlies.cern.ch/repo/data/data-art/RecJobTransformTests/mc15_5TeV.420000.Hijing_PbPb_5p02TeV_MinBias_Flow_JJFV6.merge.HITS.e4962_s3004_s2921/HITS.09732013._000496.pool.root.1 --outputESDFile=ESD.pool.root --outputAODFile=AOD.pool.root --maxEvents=25 --conditionsTag 'all:OFLCOND-MC15c-SDR-11' --postInclude 'all:RecJobTransforms/UseFrontier.py,SimulationJobOptions/postInclude.HijingPars.py' --preExec 'all:rec.doHeavyIon.set_Value_and_Lock(True)' --autoConfiguration 'everything' --triggerConfig 'MCRECO:MC_HI_v3_tight_mc_prescale' --DataRunNumber '226000' --geometryVersion 'all:ATLAS-R2-2015-03-01-00'
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>
      
            <jobTransform userJobId="data11_heavy_ion">
                <doc>heavy ion reconstruction test from Andrzej Olszewski and Iwona Grabowska-Bold</doc>
                <jobTransformJobName>HeavyIon_data</jobTransformJobName>
                <jobTransformCmd>
                    export TRF_ECHO=True; Reco_tf.py --inputBSFile /afs/cern.ch/atlas/project/rig/referencefiles/RTTinputFiles/HeavyIon/data11_hi.00193321.physics_HardProbes.merge.RAW._lb0050._SFO-9._0002.1 --outputESDFile ESD.pool.root --outputAODFile AOD.pool.root --conditionsTag COMCOND-BLKPA-RUN1-06 --geometryVersion ATLAS-R1-2011-02-00-00 --autoConfiguration=everything --maxEvents='25'
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>
      
            <jobTransform userJobId="data15_heavy_ion">
                <doc>heavy ion reconstruction test from Andrzej Olszewski and Iwona Grabowska-Bold</doc>
                <jobTransformJobName>HeavyIon_data</jobTransformJobName>
                <jobTransformCmd>
                    export TRF_ECHO=True; Reco_tf.py --inputBSFile=/cvmfs/atlas-nightlies.cern.ch/repo/data/data-art/RecJobTransformTests/data15_hi.00286711.physics_MinBiasOverlay.daq.RAW._lb0217._SFO-2._0001.data --outputESDFile=ESD.root --outputAODFile=AOD.root --maxEvents=25 --conditionsTag 'default:CONDBR2-BLKPA-2016-07' --geometryVersion 'default:ATLAS-R2-2015-03-01-00' --autoConfiguration 'everything' --preExec 'all:rec.doHeavyIon.set_Value_and_Lock(True)'
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>

            <!-- Test runs on 8TeV collision data -->
      
            <jobTransform userJobId="data12_8TeV">
                <doc>Reco_tf runs on 8TeV collision data</doc>
                <jobTransformJobName>RecoTf_8TeV_data</jobTransformJobName>
                <jobTransformCmd>
                    Reco_tf.py --inputBSFile /afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/data12_8TeV/data12_8TeV.00209109.physics_JetTauEtmiss.merge.RAW._lb0186._SFO-1._0001.1 --maxEvents 300 --autoConfiguration everything --conditionsTag="COMCOND-BLKPA-RUN1-07" --preExec 'rec.doTrigger=False;' --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --outputHISTFile myHist.root 
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>

            <!-- Test runs on 13TeV collision data -->
      
            <jobTransform userJobId="data15_13TeV">
                <doc>Reco_tf runs on 13TeV collision data 2015</doc>
                <jobTransformJobName>RecoTf_13TeV_data_2015</jobTransformJobName>
                <jobTransformCmd>
				Reco_tf.py --inputBSFile /eos/atlas/atlascerngroupdisk/phys-rig/data15_13TeV.00283429.physics_Main.daq.RAW/data15_13TeV.00283429.physics_Main.daq.RAW._lb0154._SFO-1._0001.data --maxEvents 300 --autoConfiguration everything --conditionsTag="CONDBR2-BLKPA-2016-14" --preExec 'rec.doTrigger=False;' --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --outputHISTFile myHist.root
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>

            <jobTransform userJobId="data16_13TeV">
                <doc>Reco_tf runs on 13TeV collision data 2016</doc>
                <jobTransformJobName>RecoTf_13TeV_data_2016</jobTransformJobName>
                <jobTransformCmd>
				Reco_tf.py --inputBSFile /eos/atlas/atlascerngroupdisk/phys-rig/data16_13TeV.00310809.physics_Main.daq.RAW/data16_13TeV.00310809.physics_Main.daq.RAW._lb1219._SFO-2._0001.data --maxEvents 300 --autoConfiguration everything --conditionsTag="CONDBR2-BLKPA-2016-19" --preExec 'rec.doTrigger=False;' --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --outputHISTFile myHist.root
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>

            <!-- [fixed] tmp solution manually remove the failing class in finalization ATLASSIM-3277 -->
			<!-- remove postExec 'from AthenaCommon.AlgSequence import AlgSequence;topSeq = AlgSequence();topSeq.remove("topSeq.InDetAmbiguitySolver")' -->
            <jobTransform userJobId="data17_13TeV">
                <doc>Reco_tf runs on 13TeV collision data 2017, early data, A3, Toroid and solenoid off</doc>
                <jobTransformJobName>RecoTf_13TeV_data_2017</jobTransformJobName>
                <jobTransformCmd>
				Reco_tf.py --inputBSFile /eos/atlas/atlascerngroupdisk/phys-rig/data17_13TeV.00324910.physics_Main.daq.RAW/data17_13TeV.00324910.physics_Main.daq.RAW._lb0713._SFO-6._0001.data --maxEvents 300 --autoConfiguration everything --conditionsTag="CONDBR2-BLKPA-2017-08" --preExec 'rec.doTrigger=False' --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --outputHISTFile myHist.root
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>

            <!-- Test runs on 13TeV collision data with Hephaestos -->
            <jobTransform userJobId="data17_13TeV_memleak">
                <doc>Reco_tf runs on 13TeV collision data with Hephaestos for checking for memory leaks 2017</doc>
                <jobTransformJobName>RecoTf_13TeV_data</jobTransformJobName>
                <jobTransformCmd>
				export LD_PRELOAD=$LCG_RELEASE_BASE/libunwind/5c2cade-76996/$LCG_PLATFORM/lib/libunwind.so; Reco_tf.py --inputBSFile /eos/atlas/atlascerngroupdisk/phys-rig/data17_13TeV.00324910.physics_Main.daq.RAW/data17_13TeV.00324910.physics_Main.daq.RAW._lb0713._SFO-6._0001.data --maxEvents 10 --autoConfiguration everything --conditionsTag="CONDBR2-BLKPA-2017-08" --preExec 'rec.doTrigger=False' --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --athenaopts '--stdcmalloc --leak-check-execute'
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>
      
            <jobTransform userJobId="data17_13TeV_fpe">
                <doc>Reco_tf runs on 13TeV collision data with floating point exception enabled 2017</doc>
                <jobTransformJobName>RecoTf_13TeV_data_fpe</jobTransformJobName>
                <jobTransformCmd>
				Reco_tf.py --inputBSFile /eos/atlas/atlascerngroupdisk/phys-rig/data17_13TeV.00324910.physics_Main.daq.RAW/data17_13TeV.00324910.physics_Main.daq.RAW._lb0713._SFO-6._0001.data --maxEvents -1 --autoConfiguration everything --conditionsTag="CONDBR2-BLKPA-2017-08" --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --outputHISTFile myHist.root --preExec 'rec.doFloatingPointException=True;rec.doTrigger=False;' --postExec 'FPEAuditor.NStacktracesOnFPE=5'
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>
      
            <!-- Test runs on cosmic data -->
      
            <jobTransform userJobId="cosmis_allstream">
                <doc>Reco_tf runs on cosmics with all streams</doc>
                <jobTransformJobName>RecoTf_cosmics</jobTransformJobName>
                <jobTransformCmd>
                    Reco_tf.py --inputBSFile /afs/cern.ch/atlas/project/rig/data/data11_cos.00193024.physics_CosmicCalo.merge.RAW/data11_cos.00193024.physics_CosmicCalo.merge.RAW._lb0096._SFO-ALL._0001.1 --maxEvents 300 --autoConfiguration everything --conditionsTag="COMCOND-BLKPA-RUN1-07" --preExec="rec.doTrigger=False;" --outputESDFile myESD.pool.root --outputNTUP_MUONCALIBFile muonCalib.root --outputHISTFile myMergedMonitoring.root --outputTAGFile myTAG.pool.root
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>
      
            <!-- Test runs on 7TeV collision data -->
      
            <jobTransform userJobId="data11_7TeV">
                <doc>Reco_tf runs on 7TeV collision data with all streams</doc>
                <jobTransformJobName>RecoTf_7TeV_data_a</jobTransformJobName>
                <jobTransformCmd>
                    Reco_tf.py --inputBSFile /afs/cern.ch/atlas/project/rig/referencefiles/dataStreams_high_mu/high_mu-data11_7TeV.00179725.physics_JetTauEtmiss.merge.RAW._lb0021.data --maxEvents 300 --autoConfiguration everything --conditionsTag="COMCOND-BLKPA-RUN1-07" --preExec 'rec.doTrigger=False;' --outputESDFile myESD.pool.root --outputAODFile myAOD.pool.root --outputTAGFile myTAG.pool.root --outputHISTFile myHist.root
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>
      
            <jobTransform userJobId="q221_dbrelease_pcache">
                <doc>Reco_tf of a run-2 MC test with a nightly dbrelease, to test dbrelease before it is distributed</doc>
                <jobTransformJobName>RecoTf_q221_diff_dbrelease</jobTransformJobName>
                <jobTransformCmd>
                    Reco_tf.py --AMIConfig q221 --DBRelease /afs/cern.ch/atlas/www/GROUPS/DATABASE/pacman4/DBRelease/DBRelease-pcache-current.tar.gz --preExec rec.Production=False --postExec "print svcMgr.IOVDbSvc.Folders"
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>
      
            <!-- Test runs on splash events -->
            <jobTransform userJobId="splash_events">
                <doc> Reco_tf runs on splash events with all streams</doc>
                <jobTransformJobName>RecoTf_splash_events</jobTransformJobName>
                <jobTransformCmd>
                    export TRF_ECHO=True; Reco_tf.py --inputBSFile /afs/cern.ch/atlas/project/rig/referencefiles/RTTinputFiles/Data_13TeV/data15_comm.00265545.physics_MinBias.merge.RAW._lb0048._SFO-ALL._0001.1 --autoConfiguration everything --conditionsTag="CONDBR2-BLKPA-2015-04" --geometryVersion="ATLAS-R2-2015-03-01-00" --outputESDFile myESD.pool.root --outputNTUP_MUONCALIBFile muonCalib.root --outputHISTFile myMergedMonitoring.root --outputTAGFile myTAG.pool.root --maxEvents 300 --preExec 'rec.doTrigger=False;'
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>
      
            <!-- Test runs with pileup MC samples w/o trigger -->
            <jobTransform userJobId="DigiMReco_tf_FCT_MC16a">
			<!-- read mc16a hits s3126 and digi+merge+reco based on r9364 -->
                <doc>Test of DigiMReco from HITS to AOD/TAG</doc>
                <jobTransformJobName>DigiMReco_FCT_MC16a_r9364</jobTransformJobName>
                <jobTransformCmd>
				Reco_tf.py --maxEvents=10 --outputRDOFile=mc16a.RDO.pool.root --outputESDFile=mc16a.ESD.pool.root --outputAODFile=mc16a.AOD.pool.root --digiSeedOffset1=1 --digiSeedOffset2=2 --inputHitsFile=/eos/atlas/atlascerngroupdisk/phys-rig/MC16Samples/mc16_13TeV.410501.PowhegPythia8EvtGen_A14_ttbar_hdamp258p75_nonallhad.simul.HITS.e5458_s3126/HITS.10730668._039360.pool.root.1 --jobNumber=1 --conditionsTag="default:OFLCOND-MC16-SDR-16" --geometryVersion="default:ATLAS-R2-2016-01-00-01" --skipEvents=0  --pileupFinalBunch=6 --autoConfiguration=everything --digiSteeringConf='StandardSignalOnlyTruth' --preInclude "HITtoRDO:Digitization/ForceUseOfPileUpTools.py,SimulationJobOptions/preInclude.PileUpBunchTrainsMC15_2015_25ns_Config1.py,RunDependentSimData/configLumi_run284500_mc16a.py" --preExec "all:rec.Commissioning.set_Value_and_Lock(True);from AthenaCommon.BeamFlags import jobproperties;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(20.0);from LArROD.LArRODFlags import larRODFlags;larRODFlags.NumberOfCollisions.set_Value_and_Lock(20);larRODFlags.nSamples.set_Value_and_Lock(4);larRODFlags.doOFCPileupOptimization.set_Value_and_Lock(True);larRODFlags.firstSample.set_Value_and_Lock(0);larRODFlags.useHighestGainAutoCorr.set_Value_and_Lock(True)" "all:from TriggerJobOpts.TriggerFlags import TriggerFlags as TF;TF.run2Config='2016'" "RAWtoESD:from InDetRecExample.InDetJobProperties import InDetFlags; InDetFlags.cutLevel.set_Value_and_Lock(14); from JetRec import JetRecUtils;f=lambda s:[\"xAOD::JetContainer#AntiKt4%sJets\"%(s,),\"xAOD::JetAuxContainer#AntiKt4%sJetsAux.\"%(s,),\"xAOD::EventShape#Kt4%sEventShape\"%(s,),\"xAOD::EventShapeAuxInfo#Kt4%sEventShapeAux.\"%(s,),\"xAOD::EventShape#Kt4%sOriginEventShape\"%(s,),\"xAOD::EventShapeAuxInfo#Kt4%sOriginEventShapeAux.\"%(s,)]; JetRecUtils.retrieveAODList = lambda : f(\"EMPFlow\")+f(\"LCTopo\")+f(\"EMTopo\")+[\"xAOD::EventShape#NeutralParticleFlowIsoCentralEventShape\",\"xAOD::EventShapeAuxInfo#NeutralParticleFlowIsoCentralEventShapeAux.\", \"xAOD::EventShape#NeutralParticleFlowIsoForwardEventShape\",\"xAOD::EventShapeAuxInfo#NeutralParticleFlowIsoForwardEventShapeAux.\", \"xAOD::EventShape#ParticleFlowIsoCentralEventShape\",\"xAOD::EventShapeAuxInfo#ParticleFlowIsoCentralEventShapeAux.\", \"xAOD::EventShape#ParticleFlowIsoForwardEventShape\",\"xAOD::EventShapeAuxInfo#ParticleFlowIsoForwardEventShapeAux.\", \"xAOD::EventShape#TopoClusterIsoCentralEventShape\",\"xAOD::EventShapeAuxInfo#TopoClusterIsoCentralEventShapeAux.\", \"xAOD::EventShape#TopoClusterIsoForwardEventShape\",\"xAOD::EventShapeAuxInfo#TopoClusterIsoForwardEventShapeAux.\",\"xAOD::CaloClusterContainer#EMOriginTopoClusters\",\"xAOD::ShallowAuxContainer#EMOriginTopoClustersAux.\",\"xAOD::CaloClusterContainer#LCOriginTopoClusters\",\"xAOD::ShallowAuxContainer#LCOriginTopoClustersAux.\"]; from eflowRec.eflowRecFlags import jobproperties; jobproperties.eflowRecFlags.useAODReductionClusterMomentList.set_Value_and_Lock(True); from TriggerJobOpts.TriggerFlags import TriggerFlags;TriggerFlags.AODEDMSet.set_Value_and_Lock(\"AODSLIM\");" "all:from BTagging.BTaggingFlags import BTaggingFlags;BTaggingFlags.btaggingAODList=[\"xAOD::BTaggingContainer#BTagging_AntiKt4EMTopo\",\"xAOD::BTaggingAuxContainer#BTagging_AntiKt4EMTopoAux.\",\"xAOD::BTagVertexContainer#BTagging_AntiKt4EMTopoJFVtx\",\"xAOD::BTagVertexAuxContainer#BTagging_AntiKt4EMTopoJFVtxAux.\",\"xAOD::VertexContainer#BTagging_AntiKt4EMTopoSecVtx\",\"xAOD::VertexAuxContainer#BTagging_AntiKt4EMTopoSecVtxAux.-vxTrackAtVertex\"];" "ESDtoAOD:from ParticleBuilderOptions.AODFlags import AODFlags; AODFlags.ThinGeantTruth.set_Value_and_Lock(True);  AODFlags.ThinNegativeEnergyCaloClusters.set_Value_and_Lock(True); AODFlags.ThinNegativeEnergyNeutralPFOs.set_Value_and_Lock(True); from JetRec import JetRecUtils; aodlist = JetRecUtils.retrieveAODList(); JetRecUtils.retrieveAODList = lambda : [item for item in aodlist if not \"OriginTopoClusters\" in item];" --postExec "all:CfgMgr.MessageSvc().setError+=[\"HepMcParticleLink\"]" "ESDtoAOD:fixedAttrib=[s if \"CONTAINER_SPLITLEVEL = '99'\" not in s else \"\" for s in svcMgr.AthenaPoolCnvSvc.PoolAttributes];svcMgr.AthenaPoolCnvSvc.PoolAttributes=fixedAttrib" "RDOtoRDOTrigger:conddb.addOverride(\"/CALO/Ofl/Noise/PileUpNoiseLumi\",\"CALOOflNoisePileUpNoiseLumi-mc15-mu30-dt25ns\")" "ESDtoAOD:CILMergeAOD.removeItem(\"xAOD::CaloClusterAuxContainer#CaloCalTopoClustersAux.LATERAL.LONGITUDINAL.SECOND_R.SECOND_LAMBDA.CENTER_MAG.CENTER_LAMBDA.FIRST_ENG_DENS.ENG_FRAC_MAX.ISOLATION.ENG_BAD_CELLS.N_BAD_CELLS.BADLARQ_FRAC.ENG_BAD_HV_CELLS.N_BAD_HV_CELLS.ENG_POS.SIGNIFICANCE.CELL_SIGNIFICANCE.CELL_SIG_SAMPLING.AVG_LAR_Q.AVG_TILE_Q.EM_PROBABILITY.PTD.BadChannelList\");CILMergeAOD.add(\"xAOD::CaloClusterAuxContainer#CaloCalTopoClustersAux.N_BAD_CELLS.ENG_BAD_CELLS.BADLARQ_FRAC.AVG_TILE_Q.AVG_LAR_Q.CENTER_MAG.ENG_POS.CENTER_LAMBDA.SECOND_LAMBDA.SECOND_R.ISOLATION.EM_PROBABILITY\");StreamAOD.ItemList=CILMergeAOD()" --postInclude "default:PyJobTransforms/UseFrontier.py"  --LowPtMinbiasHitsFile /eos/atlas/atlascerngroupdisk/phys-rig/MC16Samples/mc16_13TeV.361238.Pythia8EvtGen_A3NNPDF23LO_minbias_inelastic_low.merge.HITS.e4981_s3087_s3089/HITS.10501925._000027.pool.root.1 --HighPtMinbiasHitsFile /eos/atlas/atlascerngroupdisk/phys-rig/MC16Samples/mc16_13TeV.361239.Pythia8EvtGen_A3NNPDF23LO_minbias_inelastic_high.merge.HITS.e4981_s3087_s3089/HITS.10501933._000008.pool.root.1 --numberOfHighPtMinBias=0.116075313 --numberOfLowPtMinBias=44.3839246425 --numberOfCavernBkg=0 
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>long</queue>
            </jobTransform>

            <jobTransform userJobId="amitag_q122">
                <doc> Reco_tf runs with AMI configTag q122</doc>
                <jobTransformJobName>RecoTrf_AMI_q122</jobTransformJobName>
                <jobTransformCmd>
                    echo 'Reco_tf.py --AMI=q122 --DataRunNumber 00191920 --outputESDFile=myESD.pool.root --outputAODFile=myAOD.pool.root --outputTAGFile=myTAG.pool.root &amp;&amp; mv myESD.pool.root myESD_$AtlasVersion.pool.root &amp;&amp; mv myAOD.pool.root myAOD_$AtlasVersion.pool.root &amp;&amp; mv myTAG.pool.root myTAG_$AtlasVersion.pool.root &amp;&amp; ln -s myESD_$AtlasVersion.pool.root myESD_current.pool.root &amp;&amp; ln -s myAOD_$AtlasVersion.pool.root myAOD_current.pool.root &amp;&amp; ln -s myTAG_$AtlasVersion.pool.root myTAG_current.pool.root' > doall.sh &amp;&amp; source doall.sh
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>
      
            <jobTransform userJobId="AthenaMT8_CaloReco">
                <doc>AthenaMT test</doc>
                <jobTransformJobName>AthenaMT8_CaloReco</jobTransformJobName>
                <jobTransformCmd>
				athena --threads=8 RecJobTransformTests_CaloHiveExOpts.py
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>

            <jobTransform userJobId="AthenaMT8_PFCaloReco">
                <doc>AthenaMT test</doc>
                <jobTransformJobName>AthenaMT8_PFCaloReco</jobTransformJobName>
                <jobTransformCmd>
				athena --threads=8 RecJobTransformTests_PFlowHiveExOpts.py
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>

            <jobTransform userJobId="AthenaMT8_MuonReco">
                <doc>AthenaMT test</doc>
                <jobTransformJobName>AthenaMT8_MuonReco</jobTransformJobName>
                <jobTransformCmd>
				athena --threads=8 RecJobTransformTests_MuonRec_myTopOptions_MT.py
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>

            <jobTransform userJobId="AthenaMT1_CaloReco">
                <doc>AthenaMT test</doc>
                <jobTransformJobName>AthenaMT1_CaloReco</jobTransformJobName>
                <jobTransformCmd>
				athena --threads=1 RecJobTransformTests_CaloHiveExOpts.py
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>

            <jobTransform userJobId="AthenaMT1_PFCaloReco">
                <doc>AthenaMT test</doc>
                <jobTransformJobName>AthenaMT1_PFCaloReco</jobTransformJobName>
                <jobTransformCmd>
				athena --threads=1 RecJobTransformTests_PFlowHiveExOpts.py
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>

            <jobTransform userJobId="AthenaMT1_MuonReco">
                <doc>AthenaMT test</doc>
                <jobTransformJobName>AthenaMT1_MuonReco</jobTransformJobName>
                <jobTransformCmd>
				athena --threads=1 RecJobTransformTests_MuonRec_myTopOptions_MT.py
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>

            <jobTransform userJobId="AthenaMT1_q431">
                <doc>AthenaMT test</doc>
                <jobTransformJobName>AthenaMT1_q431</jobTransformJobName>
                <jobTransformCmd>
				Reco_tf.py --AMI=q431 --outputTAGFile=myTAG.pool.root --outputAODFile=myAOD.pool.root --outputESDFile=myESD.pool.root --outputHISTFile=myHIST.root --inputBSFile=/cvmfs/atlas-nightlies.cern.ch/repo/data/data-art/Tier0ChainTests/data16_13TeV.00297447.physics_Main.daq.RAW._lb0555._SFO-1._0001.data --imf False --athenaopts='--threads=1' --maxEvents=300
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>

            <jobTransform userJobId="AthenaMT1_q221">
                <doc>AthenaMT test</doc>
                <jobTransformJobName>AthenaMT1_q221</jobTransformJobName>
                <jobTransformCmd>
				Reco_tf.py --AMI=q221 --outputRDOFile=myRDO.pool.root --outputTAGFile=myTAG.pool.root --outputAODFile=myAOD.pool.root --outputESDFile=myESD.pool.root --outputHISTFile=myHIST.root --inputHITSFile=/cvmfs/atlas-nightlies.cern.ch/repo/data/data-art/Tier0ChainTests/mc15_13TeV.410500.PowhegPythia8EvtGen_A14_ttbar_hdamp172p5_nonallhad.simul.HITS.e4797_s2726.50events.pool.root --imf False --athenaopts='--threads=1' --maxEvents=300
                </jobTransformCmd>
                <group>RecTrf</group>
                <queue>medium</queue>
            </jobTransform>


        </jobList>
    
        <jobGroups>
      
            <jobGroup name="RecTrf" parent="Transform">
                <keepFilePattern>*.root*</keepFilePattern>
                <keepFilePattern>*.pmon.gz</keepFilePattern>
                <keepFilePattern>*.log</keepFilePattern>
                <keepFilePattern>log.*</keepFilePattern>
                <keepFilePattern>logExtract.txt</keepFilePattern>
                <keepFilePattern>SGAud*.out</keepFilePattern>
                <keepFilePattern>*.txt</keepFilePattern>
                <keepFilePattern>*.bz2</keepFilePattern>
	
                <keepFilePattern>jobReport*.json</keepFilePattern>
                <keepFilePattern>*.data</keepFilePattern>
	
                <auxFilePattern>run_memleak_rjtt.sh</auxFilePattern>
                <auxFilePattern>slurpRecoRTTTests.pl</auxFilePattern>
                <auxFilePattern>compressRTTLogFiles_rjtt.sh</auxFilePattern>
	
                <action position="1" runInAtlasEnv="yes">
                    <modulename>PostProcessRecoRTTTests</modulename>
                    <testname>PostProcessRecoRTTTests</testname>
                </action>
	
            </jobGroup>   
        </jobGroups>
    
    </rtt>
  
</unifiedTestConfiguration>
