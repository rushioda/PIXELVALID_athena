#----------------------------------------------------
#  T2CaloJet options
#----------------------------------------------------
theApp.Dlls += [ "TrigT2CaloJet" ]

include( "TrigT2CaloCommon/jobOfragment_TrigT2CaloCommon.py" )

T2CaloJet_g4_L2 = Algorithm( "T2CaloJet_g4_L2" )
T2CaloJet_g4_L2.T2JetTools=["T2CaloJetGridFromCells","T2CaloJetConeTool","T2CaloJetCalibTool"]
T2CaloJet_g4_L2.OutputLevel = INFO
T2CaloJet_g4_L2.clearJetGrid = False

# Set up default options (according to Osamu's talk at Trigger&Physics week, March)
#  ROI size in eta x phi: 0.7x0.7
#  Number of iterations = 3
#  Cone radius: R = 0.4
T2CaloJet_g4_L2.EtaWidth = 0.35 # Eta half width
T2CaloJet_g4_L2.PhiWidth = 0.35 # Phi half width

T2CaloJet_g4_L2.T2CaloJetConeTool.coneRadius = 0.4;
T2CaloJet_g4_L2.T2CaloJetConeTool.numberOfIterations = 3;

# Adding calibration. 
# Performance described in: 
# http://indico.cern.ch/getFile.py/access?contribId=25&amp;sessionId=4&amp;resId=0&amp;materialId=slides&amp;confId=5141

include("TrigT2CaloCalibration/T2SampCalibration_jobOptions.py")

T2CaloJet_g4_L2.T2CaloJetCalibTool.CalibToolName = "T2SampCalibTool"
T2CaloJet_g4_L2.T2CaloJetCalibTool.T2SampCalibTool.nEtaBin = 44
T2CaloJet_g4_L2.T2CaloJetCalibTool.T2SampCalibTool.EtRegionLimit = 5000

T2CaloJet_g4_L2.T2CaloJetCalibTool.T2SampCalibTool.EtaReg=[0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2.,2.1,2.2,2.3,2.4,2.5,2.6,2.7,2.8,2.9,3.,3.1,3.2,3.3,3.4,3.5,3.6,3.7,3.8,3.9,4,4.1,4.2,4.3,4.4]

T2CaloJet_g4_L2.T2CaloJetCalibTool.T2SampCalibTool.VECut=[20, 20.1001, 20.4013, 20.9068, 21.6214, 22.5525, 23.7093, 25.1034, 26.7487, 28.6617, 30.8616, 33.3704, 36.2131, 39.4183, 43.018, 47.0482, 51.5493, 56.5663, 62.1495, 68.3546, 75.2439, 82.8863, 91.3582, 100.744, 111.139, 122.646, 135.38, 149.469, 165.055, 182.292, 201.353, 222.43, 245.733, 271.495, 299.975, 331.456, 366.256, 404.72, 447.236, 494.227, 546.165, 603.569, 667.013, 737.134]

#Schema of weights specification through jobO
###########################################################
# i -> this is the number of eta bin                      #
#m_wt[i][0][0],m_wt[i][0][1],m_wt[i][0][2],m_wt[i][0][3], #
#m_wt[i][1][0],m_wt[i][1][1],m_wt[i][0][2],m_wt[i][1][3], #
###########################################################

T2CaloJet_g4_L2.T2CaloJetCalibTool.T2SampCalibTool.Weights=[
1.48308, -0.0826528, 0.5, 0.5,
1.42289, -0.0171067, 0.5, 0.5,

1.45557, -0.0781768, 0.5, 0.5,
1.44633, -0.027712, 0.5, 0.5,

1.43856, -0.0751478, 0.5, 0.5,
1.45253, -0.0306214, 0.5, 0.5,

1.43498, -0.0718259, 0.5, 0.5,
1.45168, -0.032742, 0.5, 0.5,

1.43684, -0.0729862, 0.5, 0.5,
1.49863, -0.048398, 0.5, 0.5,

1.45232, -0.0772673, 0.5, 0.5,
1.45768, -0.03347, 0.5, 0.5,

1.47967, -0.0838591, 0.5, 0.5,
1.43648, -0.0286997, 0.5, 0.5,

1.50318, -0.0855062, 0.5, 0.5,
1.50884, -0.0353893, 0.5, 0.5,

1.52509, -0.0885095, 0.5, 0.5,
1.52056, -0.032717, 0.5, 0.5,

1.5283, -0.0951263, 0.5, 0.5,
1.58505, -0.0175355, 0.5, 0.5,

 1.53577, -0.0941264, 0.5, 0.5,
 1.44049, -0.0297817, 0.5, 0.5,

 1.54731, -0.103539, 0.5, 0.5,
 1.26273, 0.009096, 0.5, 0.5,

 1.50927, -0.0939212, 0.5, 0.5,
 1.53218, -0.0516523, 0.5, 0.5,

 1.53583, -0.0924597, 0.5, 0.5,
 1.57429, -0.0390652, 0.5, 0.5,

 1.56737, -0.0848132, 0.5, 0.5,
 1.6557, -0.0695771, 0.5, 0.5,

 1.48189, -0.122748, 0.5, 0.5,
 1.63334, -0.00433293, 0.5, 0.5,

 1.3956, -0.0938853, 0.5, 0.5,
 1.65188, -0.0527244, 0.5, 0.5,

 1.39098, -0.0913043, 0.5, 0.5,
 1.50682, -0.0362353, 0.5, 0.5,

 1.3567, -0.0810333, 0.5, 0.5,
 1.47922, -0.0375228, 0.5, 0.5,

 1.33288, -0.0776533, 0.5, 0.5,
 1.47069, -0.0322596, 0.5, 0.5,

 1.29355, -0.067195, 0.5, 0.5,
 1.50526, -0.0458961, 0.5, 0.5,

 1.27226, -0.0561386, 0.5, 0.5,
 1.51188, -0.0578599, 0.5, 0.5,

 1.29132, -0.071984, 0.5, 0.5,
 1.41631, -0.0172732, 0.5, 0.5,

 1.29759, -0.0714317, 0.5, 0.5,
 1.50393, -0.0499248, 0.5, 0.5,

 1.27971, -0.0677093, 0.5, 0.5,
 1.47009, -0.036954, 0.5, 0.5,

 1.27665, -0.0625996, 0.5, 0.5,
 1.47138, -0.0381273, 0.5, 0.5,

 1.28796, -0.0642188, 0.5, 0.5,
 1.45072, -0.0414209, 0.5, 0.5,

 1.23851, -0.0422229, 0.5, 0.5,
 1.57495, -0.0825966, 0.5, 0.5,

 1.29582, -0.0643765, 0.5, 0.5,
 1.57768, -0.0887841, 0.5, 0.5,

 1.37418, -0.116019, 0.5, 0.5,
 1.69627, -0.0531049, 0.5, 0.5,

 1.3154, -0.0621647, 0.5, 0.5,
 2.28643, -0.265052, 0.5, 0.5,

 1.28765, -0.0955826, 0.5, 0.5,
 2.76714, -0.109484, 0.5, 0.5,

 # Weights were not extracted for the forward calorimeters.
 # don't apply any correction there:

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 

 1., 0.  , 0.5, 0.5, 
 1., 0.  , 0.5, 0.5, 
]


