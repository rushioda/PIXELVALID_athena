<?xml version="1.0"?>
<!DOCTYPE unifiedTestConfiguration SYSTEM "http://www.hep.ucl.ac.uk/atlas/AtlasTesting/DTD/unifiedTestConfiguration.dtd">

<!--
  don't forget to validate the xml syntax of this file after changing it:
    python /afs/cern.ch/user/r/rtt/public/xmlvalidate.py ISF_Validation_TestConfiguration.xml
-->

<unifiedTestConfiguration>
  <rtt xmlns="http://www.hep.ucl.ac.uk/atlas/AtlasTesting/rtt">
    <rttContactPerson>Elmar Ritsch (elmar.ritsch@cern.ch)</rttContactPerson>
    <rttContactPerson>John Chapman (chapman@hep.phy.cam.ac.uk)</rttContactPerson>
    <rttContactPerson>Robert Harrington (roberth@cern.ch)</rttContactPerson>
    <mailto>atlas-simulation-testreports@cern.ch</mailto>

    <!--
       run the following to check the xml syntax in this file:
       python /afs/cern.ch/user/r/rtt/public/validateXML.py ISF_Validation_TestConfiguration.xml
       (this is now done by default when make is run on this package)
      -->

    <jobList>
      <classification>
        <displayClass>OfflineValidation</displayClass>
        <displayProcess>Simul</displayProcess>
        <displayComponent>Athena-Core</displayComponent>
      </classification>

      <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
          %%                FullG4 ttbar (MC15 production setup)
          %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        -->
      <chain>
        <chainName>SimulationTest_FullG4_ttbar</chainName>
        <sequential>

          <chainElement>
            <jobTransform userJobId="FullG4_ttbar_1sim">
              <doc>Test detector functionality for ISF FullG4 using ttbar events</doc>
              <jobTransformJobName>FullG4_ttbar_1sim</jobTransformJobName>
              <jobTransformCmd>Sim_tf.py --conditionsTag 'default:OFLCOND-RUN12-SDR-19' --physicsList 'FTFP_BERT' --truthStrategy 'MC15aPlus' --simulator 'FullG4' --postInclude 'default:PyJobTransforms/UseFrontier.py,G4AtlasTests/postInclude.DCubeTest.py' --preInclude 'EVNTtoHITS:SimulationJobOptions/preInclude.BeamPipeKill.py,SimulationJobOptions/preInclude.FrozenShowersFCalOnly.py' --DataRunNumber '222525' --geometryVersion 'default:ATLAS-R2-2015-03-01-00_VALIDATION' --inputEVNTFile "/afs/cern.ch/atlas/groups/Simulation/EVNT_files/mc12_valid.110401.PowhegPythia_P2012_ttbar_nonallhad.evgen.EVNT.e3099.01517252._000001.pool.root.1" --outputHITSFile "Hits.pool.root" --maxEvents 4</jobTransformCmd>
              <group>ISF_Validation_sim</group>
              <queue>medium</queue>

              <test position="1">
                <modulename>RttLibraryTools</modulename>
                <testname>DCubeRunner</testname>
                <arg>
                  <argname>DCubeCfg</argname>
                  <argvalue>MC15/dcube-G4_ttbar_1sim.xml</argvalue>
                </arg>
                <arg>
                  <argname>DCubeRef</argname>
                  <argvalue>MC15/G4_ttbar_1sim.truth.root</argvalue>
                </arg>
                <arg>
                  <argname>DCubeMon</argname>
                  <argvalue>truth.root</argvalue>
                </arg>
                <keepFilePattern>DCube-MC15/G4_ttbar_1sim.truth.root/truth.root.dcube.xml.php</keepFilePattern>
                <noalarm />
              </test>
            </jobTransform>
          </chainElement>

          <chainElement>
            <jobTransform userJobId="FullG4_ttbar_1sim_Reg">
              <doc>Regression test between releases</doc>
              <jobTransformJobName>FullG4_ttbar_1sim_Reg</jobTransformJobName>
              <jobTransformCmd>sim_reg_test.py FullG4_ttbar_1sim truth.root Hits.pool.root</jobTransformCmd>
              <group>ISF_Validation_HitsRegressionTests</group>
              <queue>short</queue>
            </jobTransform>
          </chainElement>

        </sequential>
      </chain>

      <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
          %%           FullG4_LongLived Z-prime (MC15 production setup)
          %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        -->
      <chain>
        <chainName>SimulationTest_FullG4_ZPrime_QuasiStable</chainName>
        <abortOnError />
        <sequential>

          <chainElement>
            <jobTransform userJobId="FullG4_LongLived_ZPrime_1sim">
              <doc>Test detector functionality for ISF G4 using ttbar</doc>
              <jobTransformJobName>FullG4_LongLived_ZPrime_1sim</jobTransformJobName>
              <jobTransformCmd>Sim_tf.py --conditionsTag 'default:OFLCOND-RUN12-SDR-19' --physicsList 'FTFP_BERT' --truthStrategy 'MC15aPlus' --simulator 'FullG4_LongLived' --postInclude 'default:PyJobTransforms/UseFrontier.py,G4AtlasTests/postInclude.DCubeTest.py' --preInclude 'EVNTtoHITS:SimulationJobOptions/preInclude.BeamPipeKill.py,SimulationJobOptions/preInclude.FrozenShowersFCalOnly.py' --DataRunNumber '222525' --geometryVersion 'default:ATLAS-R2-2015-03-01-00_VALIDATION' --inputEVNTFile "root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/simulation/jira/ATLASSIM-1795/EVNT.04607198._000001.pool.root.1" --outputHITSFile "Hits.pool.root" --maxEvents 10</jobTransformCmd>
              <group>ISF_Validation_sim</group>
              <queue>medium</queue>

              <test position="1">
                <modulename>RttLibraryTools</modulename>
                <testname>DCubeRunner</testname>
                <arg>
                  <argname>DCubeCfg</argname>
                  <argvalue>MC15/dcube-G4_MC15_ZPrime_QuasiStable_1sim.xml</argvalue>
                </arg>
                <arg>
                  <argname>DCubeRef</argname>
                  <argvalue>MC15/G4_MC15_ZPrime_QuasiStable_1sim.truth.root</argvalue>
                </arg>
                <arg>
                  <argname>DCubeMon</argname>
                  <argvalue>truth.root</argvalue>
                </arg>
                <keepFilePattern>DCube-MC15/G4_MC15_ZPrime_QuasiStable_1sim.truth.root/truth.root.dcube.xml.php</keepFilePattern>
                <noalarm />
              </test>
            </jobTransform>
          </chainElement>

          <chainElement>
            <jobTransform userJobId="FullG4_LongLived_ZPrime_1sim_Reg">
              <doc>Regression test between releases</doc>
              <jobTransformJobName>FullG4_LongLived_ZPrime_1sim_Reg</jobTransformJobName>
              <jobTransformCmd>sim_reg_test.py FullG4_LongLived_ZPrime_1sim truth.root Hits.pool.root</jobTransformCmd>
              <group>ISF_Validation_HitsRegressionTests</group>
              <queue>short</queue>
            </jobTransform>
          </chainElement>

        </sequential>
      </chain>

       <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
         %%                           Geant4 Z-prime LongLived (MC15 Truth Strategy) (will soon be depricated)
         %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        -->
      <chain>
        <chainName>SimulationTest_Geant4_ZPrime_QuasiStable_MC15</chainName>
        <abortOnError />
        <sequential>

          <chainElement>
            <jobTransform userJobId="G4_MC15_ZPrime_QuasiStable_1sim">
              <doc>Test detector functionality for ISF G4 using ttbar</doc>
              <jobTransformJobName>G4_MC15_ZPrime_QuasiStable_1sim</jobTransformJobName>
              <jobTransformCmd>xrdcp root://eosatlas//eos/atlas/atlascerngroupdisk/proj-sit/simulation/jira/ATLASSIM-1795/EVNT.04607198._000001.pool.root.1 EVNT.04607198._000001.pool.root.1; Sim_tf.py --inputEVNTFile="EVNT.04607198._000001.pool.root.1" --DataRunNumber="222525" --conditionsTag="OFLCOND-RUN12-SDR-20" --geometryVersion="ATLAS-R2-2015-03-01-00_VALIDATION" --maxEvents="10" --outputHITSFile="Hits.pool.root" --physicsList="FTFP_BERT" --postInclude="PyJobTransforms/UseFrontier.py" --preInclude EVNTtoHITS:SimulationJobOptions/preInclude.BeamPipeKill.py --randomSeed="8" --simulator="MC12G4_longLived" --truthStrategy MC15 --postInclude=G4AtlasTests/postInclude.DCubeTest.py</jobTransformCmd>
              <group>ISF_Validation_sim</group>
              <queue>medium</queue>

              <test position="1">
                <modulename>RttLibraryTools</modulename>
                <testname>DCubeRunner</testname>
                <arg>
                  <argname>DCubeCfg</argname>
                  <argvalue>MC15/dcube-G4_MC15_ZPrime_QuasiStable_1sim.xml</argvalue>
                </arg>
                <arg>
                  <argname>DCubeRef</argname>
                  <argvalue>MC15/G4_MC15_ZPrime_QuasiStable_1sim.truth.root</argvalue>
                </arg>
                <arg>
                  <argname>DCubeMon</argname>
                  <argvalue>truth.root</argvalue>
                </arg>
                <keepFilePattern>DCube-MC15/G4_MC15_ZPrime_QuasiStable_1sim.truth.root/truth.root.dcube.xml.php</keepFilePattern>
                <noalarm />
              </test>
            </jobTransform>
          </chainElement>

          <chainElement>
            <jobTransform userJobId="G4_MC15_ZPrime_QuasiStable_1sim_Reg">
              <doc>Regression test between releases</doc>
              <jobTransformJobName>G4_MC15_ZPrime_QuasiStable_1sim_Reg</jobTransformJobName>
              <jobTransformCmd>sim_reg_test.py G4_MC15_ZPrime_QuasiStable_1sim truth.root Hits.pool.root</jobTransformCmd>
              <group>ISF_Validation_HitsRegressionTests</group>
              <queue>short</queue>
            </jobTransform>
          </chainElement>

        </sequential>
      </chain>

     <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
         %%         FullG4 Minbias FullChain (MC15 production setup)
         %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        -->
      <chain>
        <chainName>FullChainTest_FullG4_minbias</chainName>
        <sequential>

          <chainElement>
            <jobTransform userJobId="FullG4_minbias_1sim">
              <doc>Tests detector functionality for ISF FullG4 truth and beam transformation using minbias events in the innerdetector</doc>
              <jobTransformJobName>FullG4_minbias_1sim</jobTransformJobName>
              <jobTransformCmd>Sim_tf.py --conditionsTag 'default:OFLCOND-RUN12-SDR-19' --physicsList 'FTFP_BERT' --truthStrategy 'MC15aPlus' --simulator 'FullG4' --postInclude 'default:PyJobTransforms/UseFrontier.py,G4AtlasTests/postInclude.DCubeTest.py' --preInclude 'EVNTtoHITS:SimulationJobOptions/preInclude.BeamPipeKill.py,SimulationJobOptions/preInclude.FrozenShowersFCalOnly.py' --DataRunNumber '222525' --geometryVersion 'default:ATLAS-R2-2015-03-01-00_VALIDATION' --inputEVNTFile "/afs/cern.ch/atlas/groups/Simulation/EVNT_files/mc12_valid.119994.Pythia8_A2MSTW2008LO_minbias_inelastic.evgen.EVNT.e3099.01517253._000001.pool.root.1" --outputHITSFile "Hits.pool.root" --maxEvents 50</jobTransformCmd>
              <group>ISF_Validation_sim</group>
              <queue>medium</queue>
              <test position="1">
                <modulename>RttLibraryTools</modulename>
                <testname>DCubeRunner</testname>
                <arg>
                  <argname>DCubeCfg</argname>
                  <!-- need to update this for minbias and minbias above -->
                  <argvalue>MC15/dcube-G4_minbias_1sim.xml</argvalue>
                </arg>
                <arg>
                  <argname>DCubeRef</argname>
                  <argvalue>MC15/G4_minbias_1sim.truth.root</argvalue>
                </arg>
                <arg>
                  <argname>DCubeMon</argname>
                  <argvalue>truth.root</argvalue>
                </arg>
                <keepFilePattern>DCube-MC15/G4_minbias_1sim.truth.root/truth.root.dcube.xml.php</keepFilePattern>
                <noalarm />
              </test>
            </jobTransform>
            <chainfileout>
              Hits.pool.root
            </chainfileout>
          </chainElement>

          <parallel>
            <chainElement>
              <jobTransform userJobId="FullG4_minbias_1sim_Reg">
                <doc>Regression test between releases</doc>
                <jobTransformJobName>FullG4_minbias_1sim_Reg</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py FullG4_minbias_1sim truth.root Hits.pool.root</jobTransformCmd>

                <group>ISF_Validation_HitsRegressionTests</group>
                <queue>short</queue>
              </jobTransform>
            </chainElement>
            <chainElement>
              <jobTransform userJobId="FullG4_minbias_1sim_Compare_MCProd_G4">
                <doc>comparison to ISF references</doc>
                <jobTransformJobName>FullG4_minbias_1sim_Compare_MCProd_G4</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py FullG4_minbias_1sim</jobTransformCmd>

                <group>ISF_Validation</group>
                <queue>short</queue>
                <test position="1">
                  <modulename>RttLibraryTools</modulename>
                  <testname>DCubeRunner</testname>
                  <arg>
                    <argname>DCubeCfg</argname>
                    <argvalue>MCProd/minbias_G4_50evt.truth.root.xml</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeRef</argname>
                    <argvalue>MCProd/minbias_G4_50evt.truth.root</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeMon</argname>
                    <argvalue>today.root</argvalue>
                  </arg>
                  <keepFilePattern>DCube-MCProd/minbias_G4_50evt.truth.root/today.root.dcube.xml.php</keepFilePattern>
                  <noalarm />
                </test>
                <testToRemove>
                  <jobGroupName>RTT:Top</jobGroupName>
                  <testidentifier>CheckFileRunner0</testidentifier>
                </testToRemove>
              </jobTransform>
            </chainElement>
            <sequential>
              <chainElement>
                <jobTransform userJobId="FullG4_minbias_2merge">
                  <doc>HITS merge job</doc>
                  <jobTransformJobName>FullG4_minbias_2merge</jobTransformJobName>
                  <jobTransformCmd>HITSMerge_tf.py --inputHITSFile='Hits.pool.root' --outputHITS_MRGFile='Merge.pool.root' --maxEvents=50 --skipEvents='0' --geometryVersion 'ATLAS-R2-2015-03-01-00' --conditionsTag 'OFLCOND-RUN12-SDR-19'</jobTransformCmd>
                  <group>ISF_Validation</group>
                  <chaindataset_info>
                    <jobTransformData/>
                    <chaindatasetName>Hits.pool.root</chaindatasetName>
                    <dataset_info>
                      <jobTransformData/>
                      <datasetName>/afs/cern.ch/atlas/offline/external/FullChainTest/long/rtt.fallback/MC12/MC12.108351.pythia_minbias.8TeV.HITS.pool.root</datasetName>
                    </dataset_info>
                  </chaindataset_info>
                  <queue>short</queue>
                  <batchWallTime>300</batchWallTime>
                </jobTransform>
                <chainfileout>
                  Merge.pool.root
                </chainfileout>
              </chainElement>
              <!-- Run Digitisation -->
              <chainElement>
                <jobTransform userJobId="FullG4_minbias_3digi">

                  <doc>Digitiziation without pile-up, with additional modifications for AFII inputs.</doc>
                  <jobTransformJobName>FullG4_minbias_3digi</jobTransformJobName>

                  <jobTransformCmd>Digi_tf.py --inputHITSFile 'Merge.pool.root' --outputRDOFile 'RDO.pool.root' --maxEvents '50' --skipEvents '0' --geometryVersion 'ATLAS-R2-2015-03-01-00' --digiSeedOffset1 '123456' --digiSeedOffset2 '2345678' --postInclude 'PyJobTransforms/UseFrontier.py' --AddCaloDigi 'False' --conditionsTag 'OFLCOND-RUN12-SDR-31'</jobTransformCmd>

                  <group>ISF_Validation</group>

                  <chaindataset_info>
                    <jobTransformData/>
                    <chaindatasetName>Merge.pool.root</chaindatasetName>
                    <dataset_info>
                      <jobTransformData/>
                      <datasetName>/afs/cern.ch/atlas/offline/external/FullChainTest/long/rtt.fallback/MC12/MC12.108351.pythia_minbias.8TeV.HITS.pool.root</datasetName>
                    </dataset_info>
                  </chaindataset_info>

                  <queue>short</queue>
                  <batchWallTime>300</batchWallTime>
                </jobTransform>
                <chainfileout>RDO.pool.root</chainfileout>
              </chainElement>

              <!-- Run Reconstruction -->
              <chainElement>
                <jobTransform userJobId="FullG4_minbias_4reco">
                  <doc>reco</doc>
                  <jobTransformJobName>FullG4_minbias_4reco</jobTransformJobName>
                  <jobTransformCmd>Reco_tf.py --inputRDOFile 'RDO.pool.root' --outputESDFile 'ESD.pool.root' --maxEvents '50' --skipEvents '0' --preInclude 'ISF_Example/preInclude.IDonly_reconstruction.py'</jobTransformCmd>
                  <group>ISF_Validation</group>
                  <chaindataset_info>
                    <jobTransformData/>
                    <chaindatasetName>RDO.pool.root</chaindatasetName>
                    <dataset_info>
                      <jobTransformData/>
                      <datasetName>/afs/cern.ch/atlas/offline/external/FullChainTest/long/rtt.fallback/MC12/MC12.108351.pythia_minbias.8TeV.RDO.pool.root</datasetName>
                    </dataset_info>
                  </chaindataset_info>
                  <queue>short</queue>
                  <batchWallTime>300</batchWallTime>
                  <test position="1">
                    <modulename>RttLibraryTools</modulename>
                    <testname>DCubeRunner</testname>
                    <arg>
                      <argname>DCubeCfg</argname>
                      <argvalue>MCProd/InDetStandardPlots.root.xml</argvalue>
                    </arg>
                    <arg>
                      <argname>DCubeRef</argname>
                      <argvalue>MCProd/minbias_G4_50evt.InDetStandardPlots.root</argvalue>
                    </arg>
                    <arg>
                      <argname>DCubeMon</argname>
                      <argvalue>InDetStandardPlots.root</argvalue>
                    </arg>
                    <keepFilePattern>DCube-MCProd/minbias_G4_50evt.InDetStandardPlots.root/InDetStandardPlots.root.dcube.xml.php</keepFilePattern>
                    <noalarm />
                  </test>
                </jobTransform>
                <chainfileout>AOD.pool.root</chainfileout>
              </chainElement>
            </sequential>
          </parallel>
        </sequential>
      </chain>


      <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
         %%                           G4 COSMICS
         %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        -->
      <jobTransform userJobId="G4_cosmics_1sim">
        <doc>Running cosmic simulation transform from track records</doc>
        <jobTransformJobName>G4_cosmics_1sim</jobTransformJobName>
        <jobTransformCmd>Sim_tf.py --simulator MC12G4 --inputEVNT_TRFile /afs/cern.ch/atlas/offline/ProdData/16.6.X/16.6.7.Y/Cosmics.TR.pool.root --outputHITSFile testCosmics.HITS.pool.root --maxEvents -1 --randomSeed 1234 --DataRunNumber '10' --geometryVersion ATLAS-R2-2015-03-01-00_VALIDATION --conditionsTag OFLCOND-RUN12-SDR-19 --firstEvent 0 --physicsList QGSP_BERT --preInclude SimulationJobOptions/preInclude.Cosmics.py --beamType cosmics</jobTransformCmd>
        <group>ISF_Validation_sim</group>
        <queue>short</queue>
        <!-- add in some tests later -->
      </jobTransform>

      <jobTransform userJobId="G4_cosmicsTR_1sim">
        <doc>Running cosmic simulation transform from track records</doc>
        <jobTransformJobName>G4_cosmicsTR_1sim</jobTransformJobName>
        <jobTransformCmd>Sim_tf.py --simulator MC12G4 --outputEVNT_TRFile 'testCosmics.TR.pool.root' --outputHITSFile 'testCosmics.HITS.pool.root' --maxEvents '1500' --randomSeed '1234' --DataRunNumber '10' --physicsList 'QGSP_BERT' --CosmicFilterVolume 'Calo' --CosmicFilterVolume2 'NONE' --preInclude 'SimulationJobOptions/preInclude.Cosmics.py' --geometryVersion 'ATLAS-R2-2015-03-01-00_VALIDATION' --conditionsTag 'OFLCOND-RUN12-SDR-19' --CosmicPtSlice 'NONE' --beamType 'cosmics'</jobTransformCmd>
        <group>ISF_Validation_sim</group>
        <queue>medium</queue>
        <!-- add in some tests later -->
      </jobTransform>


      <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
         %%                      G4 CALIBRATION HITS
         %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        -->

      <chain>
        <chainName>RegressionTest_G4_WriteCalHitsTest</chainName>
        <sequential>

          <chainElement>
            <jobTransform userJobId="G4_WriteCalHitsTest_1sim">
              <doc>Reading gen events, single particle</doc>
              <jobTransformJobName>G4_WriteCalHitsTest_1sim</jobTransformJobName>
              <jobTransformCmd>Sim_tf.py --simulator MC12G4 --inputEVNTFile '/afs/cern.ch/atlas/offline/ProdData/16.6.X/16.6.7.Y/pi_E50_eta0-60.evgen.pool.root' --outputHITSFile 'Hits.pool.root' --maxEvents '10' --skipEvents '0' --randomSeed '10' --geometryVersion 'ATLAS-R2-2015-03-01-00_VALIDATION' --conditionsTag 'OFLCOND-RUN12-SDR-19' --preInclude 'SimulationJobOptions/preInclude.CalHits.py,SimulationJobOptions/preInclude.ParticleID.py' --postInclude 'G4AtlasTests/postInclude.DCubeTest_CaloCalibHits.py' --preExec 'simFlags.ReleaseGeoModel=False;'</jobTransformCmd>
              <group>ISF_Validation_sim</group>
              <queue>short</queue>
              <test position="1">
                <modulename>RttLibraryTools</modulename>
                <testname>DCubeRunner</testname>
                <testidentifier>G4_WriteCalHitsTestDCubeTest</testidentifier>
                <arg>
                  <argname>DCubeCfg</argname>
                  <argvalue>MC15/dcube-G4_WriteCalHitsTest_1sim.xml</argvalue>
                </arg>
                <arg>
                  <argname>DCubeRef</argname>
                  <argvalue>MC15/G4_WriteCalHitsTest_1sim.truth.root</argvalue>
                </arg>
                <arg>
                  <argname>DCubeMon</argname>
                  <argvalue>truth.root</argvalue>
                </arg>
                <keepFilePattern>DCube-MC15/G4_WriteCalHitsTest_1sim.truth.root/truth.root.dcube.xml.php</keepFilePattern>
                <noalarm />
              </test>
            </jobTransform>
          </chainElement>

          <chainElement>
            <jobTransform userJobId="G4_WriteCalHitsTest_1sim_Reg">
              <doc>Regression test between releases</doc>
              <jobTransformJobName>G4_WriteCalHitsTest_Reg</jobTransformJobName>
              <jobTransformCmd>sim_reg_test.py G4_WriteCalHitsTest_1sim truth.root Hits.pool.root</jobTransformCmd>
              <group>ISF_Validation</group>
              <queue>short</queue>
              <test position="1">
                <modulename>RttLibraryTools</modulename>
                <testname>DCubeRunner</testname>
                <testidentifier>G4_WriteCalHitsTest_RegDCubeTest</testidentifier>
                <arg>
                  <argname>DCubeCfg</argname>
                  <argvalue>MC15/dcube-G4_WriteCalHitsTest_1sim.xml</argvalue>
                </arg>
                <arg>
                  <argname>DCubeRef</argname>
                  <argvalue>yesterday.truth.root</argvalue>
                </arg>
                <arg>
                  <argname>localRefFile</argname>
                  <argvalue>True</argvalue>
                </arg>
                <arg>
                  <argname>DCubeMon</argname>
                  <argvalue>today.truth.root</argvalue>
                </arg>
                <keepFilePattern>DCube-yesterday.truth.root/today.truth.root.dcube.xml.php</keepFilePattern>
              </test>
              <test position="2">
                <modulename>RttLibraryTools</modulename>
                <testname>DiffPoolFilesRunner</testname>
                <testidentifier>HITS_RegressionTestRunner</testidentifier>
                <arg>
                  <argname>fileName</argname>
                  <argvalue>today.Hits.pool.root</argvalue>
                </arg>
                <arg>
                  <argname>refFileName</argname>
                  <argvalue>yesterday.Hits.pool.root</argvalue>
                </arg>
                <keepFilePattern>today.Hits.pool.root_yesterday.Hits.pool.root.diffPool</keepFilePattern>
              </test>

              <testToRemove>
                <jobGroupName>RTT:Top</jobGroupName>
                <testidentifier>CheckFileRunner0</testidentifier>
              </testToRemove>
            </jobTransform>
          </chainElement>

        </sequential>
      </chain>


      <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
         %%                           ATLFASTII ttbar (FullChainTest)
         %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        -->
      <chain>
        <chainName>FullChainTest_ATLFASTII_ttbar</chainName>
        <sequential>
          <chainElement>
            <jobTransform userJobId="ATLFASTII_ttbar_1sim">
              <doc>Tests detector functionality for ISF ATLFASTII-like configuration using ttbar events</doc>
              <jobTransformJobName>ATLFASTII_ttbar_1sim</jobTransformJobName>
              <!-- MC15 production AMI tag a766 -->
              <jobTransformCmd>Sim_tf.py --conditionsTag 'default:OFLCOND-RUN12-SDR-19' --physicsList 'FTFP_BERT' --truthStrategy 'MC12' --simulator 'ATLFASTII' --postInclude 'default:PyJobTransforms/UseFrontier.py' 'G4AtlasTests/postInclude.DCubeTest.py' --preInclude 'EVNTtoHITS:SimulationJobOptions/preInclude.BeamPipeKill.py' --DataRunNumber '222525' --geometryVersion 'default:ATLAS-R2-2015-03-01-00_VALIDATION' --inputEVNTFile "/afs/cern.ch/atlas/groups/Simulation/EVNT_files/mc12_valid.110401.PowhegPythia_P2012_ttbar_nonallhad.evgen.EVNT.e3099.01517252._000001.pool.root.1" --outputHITSFile "Hits.pool.root" --maxEvents 250</jobTransformCmd>
              <group>ISF_Validation_sim</group>
              <queue>long</queue>
              <test>
                <modulename>RttLibraryTools</modulename>
                <testname>DCubeRunner</testname>
                <arg>
                  <argname>DCubeCfg</argname>
                  <argvalue>MC15/dcube-ISF_ATLFASTII_ttbar_MC12.xml</argvalue>
                </arg>
                <arg>
                  <argname>DCubeRef</argname>
                  <argvalue>MC15/ISF_ATLFASTII_ttbar_MC12.truth.root</argvalue>
                </arg>
                <arg>
                  <argname>DCubeMon</argname>
                  <argvalue>truth.root</argvalue>
                </arg>
                <keepFilePattern>ISF_ATLFASTII_ttbar_log</keepFilePattern>
                <keepFilePattern>DCube-MC15/ISF_ATLFASTII_ttbar_MC12.truth.root/truth.root.dcube.xml.php</keepFilePattern>
                <noalarm />
              </test>
            </jobTransform>
            <chainfileout>Hits.pool.root</chainfileout>
          </chainElement>
          <parallel>
            <chainElement>
              <jobTransform userJobId="ATLFASTII_ttbar_1sim_Compare_MCProd_AFII">
                <doc>comparison to ISF references</doc>
                <jobTransformJobName>ATLFASTII_ttbar_1sim_Compare_MCProd_AFII</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py ATLFASTII_ttbar_1sim</jobTransformCmd>
                <group>ISF_Validation</group>
                <queue>extrashort</queue>
                <test>
                  <modulename>RttLibraryTools</modulename>
                  <testname>DCubeRunner</testname>
                  <arg>
                    <argname>DCubeCfg</argname>
                    <argvalue>MCProd/ttbar_ATLFASTII_500evt.truth.root.xml</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeRef</argname>
                    <argvalue>MCProd/ttbar_ATLFASTII_500evt.truth.root</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeMon</argname>
                    <argvalue>today.root</argvalue>
                  </arg>
                  <keepFilePattern>DCube-MCProd/ttbar_ATLFASTII_500evt.truth.root/today.root.dcube.xml.php</keepFilePattern>
                  <noalarm />
                </test>
                <testToRemove>
                  <jobGroupName>RTT:Top</jobGroupName>
                  <testidentifier>CheckFileRunner0</testidentifier>
                </testToRemove>
              </jobTransform>
            </chainElement>
            <chainElement>
              <jobTransform userJobId="ATLFASTII_ttbar_1sim_Reg">
                <doc>Regression test between releases</doc>
                <jobTransformJobName>ATLFASTII_ttbar_1sim_Reg</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py ATLFASTII_ttbar_1sim truth.root Hits.pool.root</jobTransformCmd>
                <group>ISF_Validation_HitsRegressionTests</group>
                <queue>medium</queue>
              </jobTransform>
            </chainElement>
            <sequential>

              <chainElement>
                <jobTransform userJobId="ATLFASTII_ttbar_2merge">
                  <doc>Merge job for backward compatibility with 17.3.13</doc>
                  <jobTransformJobName>ATLFASTII_ttbar_2merge</jobTransformJobName>
                  <jobTransformCmd>HITSMerge_tf.py --inputHITSFile='Hits.pool.root' --outputHITS_MRGFile='Merge.pool.root' --maxEvents=-1 --skipEvents='0' --geometryVersion='ATLAS-R2-2015-03-01-00' --conditionsTag='OFLCOND-RUN12-SDR-19'</jobTransformCmd>
                  <group>ISF_Validation</group>
                  <chaindataset_info>
                    <jobTransformData/>
                    <chaindatasetName>Hits.pool.root</chaindatasetName>
                    <dataset_info>
                      <jobTransformData/>
                      <datasetName>/afs/cern.ch/atlas/offline/external/FullChainTest/long/rtt.fallback/MC12/MC12.108351.pythia_minbias.8TeV.HITS.pool.root</datasetName>
                    </dataset_info>
                  </chaindataset_info>
                  <queue>short</queue>
                </jobTransform>
                <chainfileout>
                  Merge.pool.root
                </chainfileout>
              </chainElement>

              <!-- Run Digitization + Reconstruction -->
              <chainElement>
                <jobTransform userJobId="ATLFASTII_ttbar_3digireco">
                  <doc>reco</doc>
                  <jobTransformJobName>ATLFASTII_ttbar_3digireco</jobTransformJobName>
                  <jobTransformCmd>Reco_tf.py --digiSteeringConf 'StandardSignalOnlyTruth' --conditionsTag 'default:OFLCOND-MC15c-SDR-09' --postInclude 'default:RecJobTransforms/UseFrontier.py' 'HITtoRDO:DigitizationTests/postInclude.RDO_Plots.py' --autoConfiguration 'everything' --steering 'doRDO_TRIG' --geometryVersion 'default:ATLAS-R2-2015-03-01-00' --DataRunNumber '267599' --preExec 'all:rec.Commissioning.set_Value_and_Lock(True);from AthenaCommon.BeamFlags import jobproperties;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(0.0);from LArROD.LArRODFlags import larRODFlags;larRODFlags.NumberOfCollisions.set_Value_and_Lock(0);larRODFlags.nSamples.set_Value_and_Lock(4);larRODFlags.doOFCPileupOptimization.set_Value_and_Lock(True);larRODFlags.firstSample.set_Value_and_Lock(0);larRODFlags.useHighestGainAutoCorr.set_Value_and_Lock(True)' 'RAWtoESD:from CaloRec.CaloCellFlags import jobproperties;jobproperties.CaloCellFlags.doLArCellEmMisCalib=False;from InDetRecExample.InDetJobProperties import InDetFlags;InDetFlags.doStandardPlots.set_Value_and_Lock(True)' 'ESDtoAOD:TriggerFlags.AODEDMSet="AODFULL"' 'RAWtoESD:from InDetRecExample.InDetJobProperties import InDetFlags;InDetFlags.doSlimming.set_Value_and_Lock(False)' 'ESDtoAOD:from InDetRecExample.InDetJobProperties import InDetFlags;InDetFlags.doSlimming.set_Value_and_Lock(False)' --numberOfCavernBkg '0' --postExec 'all:CfgMgr.MessageSvc().setError+=["HepMcParticleLink"]' "ESDtoAOD:fixedAttrib=[s if \"CONTAINER_SPLITLEVEL = \'99\'\" not in s else \"\" for s in svcMgr.AthenaPoolCnvSvc.PoolAttributes];svcMgr.AthenaPoolCnvSvc.PoolAttributes=fixedAttrib" --inputHITSFile 'Merge.pool.root' --outputRDOFile 'RDO.pool.root' --outputESDFile 'ESD.pool.root' --outputAODFile 'AOD.pool.root' --outputNTUP_PHYSVALFile 'PhysValMon.root' --validationFlags 'doInDet,doJet,doMuon,doEgamma' --maxEvents '250' --jobNumber '1'</jobTransformCmd>
                  <group>ISF_Validation</group>
                  <chaindataset_info>
                    <jobTransformData/>
                    <chaindatasetName>Merge.pool.root</chaindatasetName>
                    <dataset_info>
                      <jobTransformData/>
                      <datasetName>/afs/cern.ch/atlas/offline/external/FullChainTest/long/rtt.fallback/MC12/MC12.108351.pythia_minbias.8TeV.HITS.pool.root</datasetName> <!-- dummy file -->
                    </dataset_info>
                  </chaindataset_info>
                  <queue>long</queue>
                </jobTransform>
              </chainElement>

              <parallel>
                <chainElement>
                  <jobTransform userJobId="ATLFASTII_ttbar_3digireco_Reg">
                    <doc>Regression test between releases</doc>
                    <jobTransformJobName>ATLFASTII_ttbar_3digireco_Reg</jobTransformJobName>
                    <jobTransformCmd>sim_reg_test.py ATLFASTII_ttbar_3digireco InDetStandardPlots.root PhysValMon.root RDO_truth.root</jobTransformCmd>
                    <group>ISF_Validation_RecoRegressionTests</group>
                    <queue>short</queue>
                  </jobTransform>
                </chainElement>
                <chainElement>
                  <jobTransform userJobId="ATLFASTII_ttbar_3digireco_Compare_MCProd_G4">
                    <doc>comparison to MC12 Geant4 references</doc>
                    <jobTransformJobName>ATLFASTII_ttbar_3digireco_Compare_MCProd_G4</jobTransformJobName>
                    <jobTransformCmd>sim_reg_test.py ATLFASTII_ttbar_3digireco InDetStandardPlots.root PhysValMon.root RDO_truth.root</jobTransformCmd>
                    <group>ISF_Validation</group>
                    <queue>medium</queue>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.InDetStandardPlots.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.InDetStandardPlots.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.InDetStandardPlots.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_G4_500evt.InDetStandardPlots.root/today.InDetStandardPlots.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.PhysValMon.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.PhysValMon.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.PhysValMon.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_G4_500evt.PhysValMon.root/today.PhysValMon.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.RDO_truth.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.RDO_truth.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.RDO_truth.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_G4_500evt.RDO_truth.root/today.RDO_truth.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <testToRemove>
                      <jobGroupName>RTT:Top</jobGroupName>
                      <testidentifier>CheckFileRunner0</testidentifier>
                    </testToRemove>
                  </jobTransform>
                </chainElement>
                <chainElement>
                  <jobTransform userJobId="ATLFASTII_ttbar_3digireco_Compare_MCProd_AFII">
                    <doc>comparison to MC12 AtlfastII references</doc>
                    <jobTransformJobName>ISF_reco_ATLFASTII_ttbar_AFII</jobTransformJobName>
                    <jobTransformCmd>sim_reg_test.py ATLFASTII_ttbar_3digireco InDetStandardPlots.root PhysValMon.root RDO_truth.root</jobTransformCmd>
                    <group>ISF_Validation</group>
                    <queue>medium</queue>
                    <test position="1">
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.InDetStandardPlots.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.InDetStandardPlots.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.InDetStandardPlots.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_ATLFASTII_500evt.InDetStandardPlots.root/today.InDetStandardPlots.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.PhysValMon.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.PhysValMon.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.PhysValMon.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_ATLFASTII_500evt.PhysValMon.root/today.PhysValMon.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.RDO_truth.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.RDO_truth.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.RDO_truth.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_ATLFASTII_500evt.RDO_truth.root/today.RDO_truth.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>

                    <testToRemove>
                      <jobGroupName>RTT:Top</jobGroupName>
                      <testidentifier>CheckFileRunner0</testidentifier>
                    </testToRemove>
                  </jobTransform>
                </chainElement>
              </parallel>
            </sequential>
          </parallel>
        </sequential>
      </chain>


      <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
         %%                          ATLFASTIIF ttbar FullChain
         %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        -->
      <chain>
        <chainName>FullChainTest_ATLFASTIIF_ttbar</chainName>
        <abortOnError />
        <sequential>
          <chainElement>
            <jobTransform userJobId="ATLFASTIIF_ttbar_1sim">
              <doc>Tests detector functionality for ISF ATLFASTIIF using ttbar</doc>
              <jobTransformJobName>ATLFASTIIF_ttbar_1sim</jobTransformJobName>
              <jobTransformCmd>Sim_tf.py --conditionsTag 'default:OFLCOND-RUN12-SDR-19' --physicsList 'FTFP_BERT' --truthStrategy 'MC12' --simulator 'ATLFASTIIF' --postInclude 'default:PyJobTransforms/UseFrontier.py' 'G4AtlasTests/postInclude.DCubeTest.py' --DataRunNumber '222525' --geometryVersion 'default:ATLAS-R2-2015-03-01-00_VALIDATION' --inputEVNTFile "/afs/cern.ch/atlas/groups/Simulation/EVNT_files/mc12_valid.110401.PowhegPythia_P2012_ttbar_nonallhad.evgen.EVNT.e3099.01517252._000001.pool.root.1" --outputHITSFile "Hits.pool.root" --maxEvents 2000</jobTransformCmd>
              <group>ISF_Validation_sim</group>
              <queue>medium</queue>
              <!--
                 <test position="1">
                   <modulename>RttLibraryTools</modulename>
                   <testname>DCubeRunner</testname>
                   <arg>
                     <argname>DCubeCfg</argname>
                     <argvalue>MC15/dcube-ISF_ATLFASTIIF_ttbar.xml</argvalue>
                   </arg>
                   <arg>
                     <argname>DCubeRef</argname>
                     <argvalue>MC15/ISF_ATLFASTIIF_ttbar.truth.root</argvalue>
                   </arg>
                   <arg>
                     <argname>DCubeMon</argname>
                     <argvalue>truth.root</argvalue>
                   </arg>
                 </test>
                 -->
            </jobTransform>
            <chainfileout>Hits.pool.root</chainfileout>
          </chainElement>
          <parallel>
            <chainElement>
              <jobTransform userJobId="ATLFASTIIF_ttbar_1sim_Reg">
                <doc>Regression test between releases</doc>
                <jobTransformJobName>ATLFASTIIF_ttbar_1sim_Reg</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py ATLFASTIIF_ttbar_1sim truth.root Hits.pool.root</jobTransformCmd>
                <group>ISF_Validation_HitsRegressionTests</group>
                <queue>medium</queue>
              </jobTransform>
            </chainElement>
            <chainElement>
              <jobTransform userJobId="ATLFASTIIF_ttbar_1sim_Compare_MCProd_G4">
                <doc>comparison to ISF references</doc>
                <jobTransformJobName>ATLFASTIIF_ttbar_1sim_Compare_MCProd_G4</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py ATLFASTIIF_ttbar_1sim</jobTransformCmd>
                <group>ISF_Validation</group>
                <queue>extrashort</queue>
                <test position="1">
                  <modulename>RttLibraryTools</modulename>
                  <testname>DCubeRunner</testname>
                  <arg>
                    <argname>DCubeCfg</argname>
                    <argvalue>MCProd/ttbar_G4_500evt.truth.root.xml</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeRef</argname>
                    <argvalue>MCProd/ttbar_G4_500evt.truth.root</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeMon</argname>
                    <argvalue>today.root</argvalue>
                  </arg>
                  <keepFilePattern>DCube-MCProd/ttbar_G4_500evt.truth.root/today.root.dcube.xml.php</keepFilePattern>
                  <noalarm />
                </test>
                <testToRemove>
                  <jobGroupName>RTT:Top</jobGroupName>
                  <testidentifier>CheckFileRunner0</testidentifier>
                </testToRemove>
              </jobTransform>
            </chainElement>
            <chainElement>
              <jobTransform userJobId="ATLFASTIIF_ttbar_1sim_Compare_MCProd_AFII">
                <doc>comparison to ISF references</doc>
                <jobTransformJobName>ATLFASTIIF_ttbar_1sim_Compare_MCProd_AFII</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py ATLFASTIIF_ttbar_1sim</jobTransformCmd>
                <group>ISF_Validation</group>
                <queue>extrashort</queue>
                <test position="1">
                  <modulename>RttLibraryTools</modulename>
                  <testname>DCubeRunner</testname>
                  <arg>
                    <argname>DCubeCfg</argname>
                    <argvalue>MCProd/ttbar_ATLFASTII_500evt.truth.root.xml</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeRef</argname>
                    <argvalue>MCProd/ttbar_ATLFASTII_500evt.truth.root</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeMon</argname>
                    <argvalue>today.root</argvalue>
                  </arg>
                  <keepFilePattern>DCube-MCProd/ttbar_ATLFASTII_500evt.truth.root/today.root.dcube.xml.php</keepFilePattern>
                  <noalarm />
                </test>
                <testToRemove>
                  <jobGroupName>RTT:Top</jobGroupName>
                  <testidentifier>CheckFileRunner0</testidentifier>
                </testToRemove>
              </jobTransform>
            </chainElement>
            <sequential>

              <!--Run Merge Job with 17.6.51 makes hit file compatible with 17.3.13-->
              <chainElement>
                <jobTransform userJobId="ATLFASTIIF_ttbar_2merge">
                  <doc>Merge job for backward compatibility with 17.3.13</doc>
                  <jobTransformJobName>ATLFASTIIF_ttbar_2merge</jobTransformJobName>
                  <jobTransformCmd>HITSMerge_tf.py --inputHITSFile='Hits.pool.root' --outputHITS_MRGFile='Merge.pool.root' --maxEvents=-1 --skipEvents='0' --geometryVersion='ATLAS-R2-2015-03-01-00' --conditionsTag='OFLCOND-RUN12-SDR-19'</jobTransformCmd>
                  <group>ISF_Validation</group>
                  <chaindataset_info>
                    <jobTransformData/>
                    <chaindatasetName>Hits.pool.root</chaindatasetName>
                    <dataset_info>
                      <jobTransformData/>
                      <datasetName>/afs/cern.ch/atlas/offline/external/FullChainTest/long/rtt.fallback/MC12/MC12.108351.pythia_minbias.8TeV.HITS.pool.root</datasetName>
                    </dataset_info>
                  </chaindataset_info>
                  <queue>short</queue>
                </jobTransform>
                <chainfileout>
                  Merge.pool.root
                </chainfileout>
              </chainElement>

              <!-- Run Digitization + Reconstruction -->
              <chainElement>
                <jobTransform userJobId="ATLFASTIIF_ttbar_3digireco">
                  <doc>reco</doc>
                  <jobTransformJobName>ATLFASTIIF_ttbar_3digireco</jobTransformJobName>
                  <jobTransformCmd>Reco_tf.py --digiSteeringConf 'StandardSignalOnlyTruth' --conditionsTag 'default:OFLCOND-MC15c-SDR-09' --postInclude 'default:RecJobTransforms/UseFrontier.py' 'HITtoRDO:DigitizationTests/postInclude.RDO_Plots.py' --autoConfiguration 'everything' --steering 'doRDO_TRIG' --geometryVersion 'default:ATLAS-R2-2015-03-01-00' --DataRunNumber '267599' --preExec 'all:rec.Commissioning.set_Value_and_Lock(True);from AthenaCommon.BeamFlags import jobproperties;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(0.0);from LArROD.LArRODFlags import larRODFlags;larRODFlags.NumberOfCollisions.set_Value_and_Lock(0);larRODFlags.nSamples.set_Value_and_Lock(4);larRODFlags.doOFCPileupOptimization.set_Value_and_Lock(True);larRODFlags.firstSample.set_Value_and_Lock(0);larRODFlags.useHighestGainAutoCorr.set_Value_and_Lock(True);' 'RAWtoESD:from CaloRec.CaloCellFlags import jobproperties;jobproperties.CaloCellFlags.doLArCellEmMisCalib=False;from InDetRecExample.InDetJobProperties import InDetFlags;InDetFlags.doStandardPlots.set_Value_and_Lock(True)' 'ESDtoAOD:TriggerFlags.AODEDMSet="AODFULL"' 'RAWtoESD:from InDetRecExample.InDetJobProperties import InDetFlags;InDetFlags.doSlimming.set_Value_and_Lock(False)' 'ESDtoAOD:from InDetRecExample.InDetJobProperties import InDetFlags;InDetFlags.doSlimming.set_Value_and_Lock(False)' --numberOfCavernBkg '0' --postExec 'all:CfgMgr.MessageSvc().setError+=["HepMcParticleLink"]' "ESDtoAOD:fixedAttrib=[s if \"CONTAINER_SPLITLEVEL = \'99\'\" not in s else \"\" for s in svcMgr.AthenaPoolCnvSvc.PoolAttributes];svcMgr.AthenaPoolCnvSvc.PoolAttributes=fixedAttrib" --inputHITSFile 'Merge.pool.root' --outputRDOFile 'RDO.pool.root' --outputESDFile 'ESD.pool.root' --outputAODFile 'AOD.pool.root' --outputNTUP_PHYSVALFile 'PhysValMon.root' --validationFlags 'doInDet,doJet,doMuon,doEgamma' --maxEvents '2000' --jobNumber '1'</jobTransformCmd>
                  <group>ISF_Validation</group>
                  <chaindataset_info>
                    <jobTransformData/>
                    <chaindatasetName>Merge.pool.root</chaindatasetName>
                    <dataset_info>
                      <jobTransformData/>
                      <datasetName>/afs/cern.ch/atlas/offline/external/FullChainTest/long/rtt.fallback/MC12/MC12.108351.pythia_minbias.8TeV.HITS.pool.root</datasetName> <!-- TODO: change this to ttbar dataset -->
                    </dataset_info>
                  </chaindataset_info>
                  <queue>long</queue>
                </jobTransform>
                <!-- not required to be on chainstore at the moment
                     <chainfileout>ESD.pool.root</chainfileout>
                     <chainfileout>AOD.pool.root</chainfileout>
                     <chainfileout>RecoValHists.root</chainfileout>
                     <chainfileout>InDetStandardPlots.root</chainfileout>
                     <chainfileout>PhysValMon.root</chainfileout>-->
              </chainElement>
              <parallel>
                <chainElement>
                  <jobTransform userJobId="ATLFASTIIF_ttbar_3digireco_Reg">
                    <doc>Regression test between builds</doc>
                    <jobTransformJobName>ATLFASTIIF_ttbar_3digireco_Reg</jobTransformJobName>
                    <jobTransformCmd>sim_reg_test.py ATLFASTIIF_ttbar_3digireco InDetStandardPlots.root PhysValMon.root RDO_truth.root</jobTransformCmd>
                    <group>ISF_Validation_RecoRegressionTests</group>
                    <queue>medium</queue>
                  </jobTransform>
                </chainElement>
                <chainElement>
                  <jobTransform userJobId="ATLFASTIIF_ttbar_3digireco_Compare_MCProd_G4">
                    <doc>comparison to MC12 Geant4 references</doc>
                    <jobTransformJobName>ATLFASTIIF_ttbar_3digireco_Compare_MCProd_G4</jobTransformJobName>
                    <jobTransformCmd>sim_reg_test.py ATLFASTIIF_ttbar_3digireco InDetStandardPlots.root PhysValMon.root RDO_truth.root</jobTransformCmd>
                    <group>ISF_Validation</group>
                    <queue>medium</queue>
                    <test position="1">
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.InDetStandardPlots.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.InDetStandardPlots.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.InDetStandardPlots.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_G4_500evt.InDetStandardPlots.root/today.InDetStandardPlots.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.PhysValMon.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.PhysValMon.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.PhysValMon.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_G4_500evt.PhysValMon.root/today.PhysValMon.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.RDO_truth.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_G4_500evt.RDO_truth.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.RDO_truth.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_G4_500evt.RDO_truth.root/today.RDO_truth.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <testToRemove>
                      <jobGroupName>RTT:Top</jobGroupName>
                      <testidentifier>CheckFileRunner0</testidentifier>
                    </testToRemove>
                  </jobTransform>
                </chainElement>

                <chainElement>
                  <jobTransform userJobId="ATLFASTIIF_ttbar_3digireco_Compare_MCProd_AFII">
                    <doc>comparison to MC12 ATLFASTII references</doc>
                    <jobTransformJobName>ATLFASTIIF_ttbar_3digireco_Compare_MCProd_AFII</jobTransformJobName>
                    <jobTransformCmd>sim_reg_test.py ATLFASTIIF_ttbar_3digireco InDetStandardPlots.root PhysValMon.root RDO_truth.root</jobTransformCmd>
                    <group>ISF_Validation</group>
                    <queue>short</queue>
                    <test position="1">
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.InDetStandardPlots.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.InDetStandardPlots.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.InDetStandardPlots.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_ATLFASTII_500evt.InDetStandardPlots.root/today.InDetStandardPlots.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.PhysValMon.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.PhysValMon.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.PhysValMon.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_ATLFASTII_500evt.PhysValMon.root/today.PhysValMon.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.RDO_truth.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/ttbar_ATLFASTII_500evt.RDO_truth.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.RDO_truth.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/ttbar_ATLFASTII_500evt.RDO_truth.root/today.RDO_truth.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <testToRemove>
                      <jobGroupName>RTT:Top</jobGroupName>
                      <testidentifier>CheckFileRunner0</testidentifier>
                    </testToRemove>
                  </jobTransform>
                </chainElement>

              </parallel>
            </sequential>

          </parallel>
        </sequential>

      </chain>

      <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
         %%                          ATLFASTIIF minbias FullChain
         %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        -->
      <chain>
        <chainName>FullChainTest_ATLFASTIIF_minbias</chainName>
        <abortOnError />
        <sequential>
          <chainElement>
            <jobTransform userJobId="ATLFASTIIF_minbias_1sim">
              <doc>Tests detector functionality for ISF ATLFASTIIF using minbias</doc>
              <jobTransformJobName>ATLFASTIIF_minbias_1sim</jobTransformJobName>
              <jobTransformCmd>Sim_tf.py --conditionsTag 'default:OFLCOND-RUN12-SDR-19' --physicsList 'FTFP_BERT' --truthStrategy 'MC12' --simulator 'ATLFASTIIF' --postInclude 'default:PyJobTransforms/UseFrontier.py' 'G4AtlasTests/postInclude.DCubeTest.py' --DataRunNumber '222525' --geometryVersion 'default:ATLAS-R2-2015-03-01-00_VALIDATION' --inputEVNTFile "/afs/cern.ch/atlas/groups/Simulation/EVNT_files/mc12_valid.119994.Pythia8_A2MSTW2008LO_minbias_inelastic.evgen.EVNT.e3099.01517253._000001.pool.root.1" --outputHITSFile "Hits.pool.root" --maxEvents 2000</jobTransformCmd>
              <group>ISF_Validation_sim</group>
              <queue>medium</queue>
              <!--
                 <test position="1">
                   <modulename>RttLibraryTools</modulename>
                   <testname>DCubeRunner</testname>
                   <arg>
                     <argname>DCubeCfg</argname>
                     <argvalue>MC15/dcube-ISF_ATLFASTIIF_minbias.xml</argvalue>
                   </arg>
                   <arg>
                     <argname>DCubeRef</argname>
                     <argvalue>MC15/ISF_ATLFASTIIF_minbias.truth.root</argvalue>
                   </arg>
                   <arg>
                     <argname>DCubeMon</argname>
                     <argvalue>truth.root</argvalue>
                   </arg>
                 </test>
                 -->
            </jobTransform>
            <chainfileout>Hits.pool.root</chainfileout>
          </chainElement>
          <parallel>
            <chainElement>
              <jobTransform userJobId="ATLFASTIIF_minbias_1sim_Reg">
                <doc>Regression test between releases</doc>
                <jobTransformJobName>ATLFASTIIF_minbias_1sim_Reg</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py ATLFASTIIF_minbias_1sim truth.root Hits.pool.root</jobTransformCmd>
                <group>ISF_Validation_HitsRegressionTests</group>
                <queue>medium</queue>
              </jobTransform>
            </chainElement>
            <chainElement>
              <jobTransform userJobId="ATLFASTIIF_minbias_1sim_Compare_MCProd_AFII">
                <doc>comparison to ISF references</doc>
                <jobTransformJobName>ATLFASTIIF_minbias_1sim_Compare_MCProd_AFII</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py ATLFASTIIF_minbias_1sim</jobTransformCmd>
                <group>ISF_Validation</group>
                <queue>extrashort</queue>
                <test position="1">
                  <modulename>RttLibraryTools</modulename>
                  <testname>DCubeRunner</testname>
                  <arg>
                    <argname>DCubeCfg</argname>
                    <argvalue>MCProd/minbias_ATLFASTII_2000evt.truth.root.xml</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeRef</argname>
                    <argvalue>MCProd/minbias_ATLFASTII_2000evt.truth.root.xml</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeMon</argname>
                    <argvalue>today.root</argvalue>
                  </arg>
                  <keepFilePattern>DCube-MCProd/minbias_ATLFASTII_2000evt.truth.root/today.root.dcube.xml.php</keepFilePattern>
                  <noalarm />
                </test>
                <testToRemove>
                  <jobGroupName>RTT:Top</jobGroupName>
                  <testidentifier>CheckFileRunner0</testidentifier>
                </testToRemove>
              </jobTransform>
            </chainElement>
            <chainElement>
              <jobTransform userJobId="ATLFASTIIF_minbias_1sim_Compare_MCProd_G4">
                <doc>comparison to ISF references</doc>
                <jobTransformJobName>ATLFASTIIF_minbias_1sim_Compare_MCProd_G4</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py ATLFASTIIF_minbias_1sim</jobTransformCmd>
                <group>ISF_Validation</group>
                <queue>extrashort</queue>
                <test position="1">
                  <modulename>RttLibraryTools</modulename>
                  <testname>DCubeRunner</testname>
                  <arg>
                    <argname>DCubeCfg</argname>
                    <argvalue>MCProd/minbias_G4_2000evt.truth.root.xml</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeRef</argname>
                    <argvalue>MCProd/minbias_G4_2000evt.truth.root.xml</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeMon</argname>
                    <argvalue>today.root</argvalue>
                  </arg>
                  <keepFilePattern>DCube-MCProd/minbias_G4_2000evt.truth.root/today.root.dcube.xml.php</keepFilePattern>
                  <noalarm />
                </test>
                <testToRemove>
                  <jobGroupName>RTT:Top</jobGroupName>
                  <testidentifier>CheckFileRunner0</testidentifier>
                </testToRemove>
              </jobTransform>
            </chainElement>
            <chainElement>
              <jobTransform userJobId="ATLFASTIIF_minbias_1sim_Compare_MCProd_AFIIF">
                <doc>comparison to ISF references</doc>
                <jobTransformJobName>ATLFASTIIF_minbias_1sim_Compare_MCProd_AFIIF</jobTransformJobName>
                <jobTransformCmd>sim_reg_test.py ATLFASTIIF_minbias_1sim</jobTransformCmd>
                <group>ISF_Validation</group>
                <queue>extrashort</queue>
                <test position="1">
                  <modulename>RttLibraryTools</modulename>
                  <testname>DCubeRunner</testname>
                  <arg>
                    <argname>DCubeCfg</argname>
                    <argvalue>MCProd/minbias_ATLFASTIIF_2000evt.truth.root.xml</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeRef</argname>
                    <argvalue>MCProd/minbias_ATLFASTIIF_2000evt.truth.root.xml</argvalue>
                  </arg>
                  <arg>
                    <argname>DCubeMon</argname>
                    <argvalue>today.root</argvalue>
                  </arg>
                  <keepFilePattern>DCube-MCProd/minbias_ATLFASTIIF_2000evt.truth.root/today.root.dcube.xml.php</keepFilePattern>
                  <noalarm />
                </test>
                <testToRemove>
                  <jobGroupName>RTT:Top</jobGroupName>
                  <testidentifier>CheckFileRunner0</testidentifier>
                </testToRemove>
              </jobTransform>
            </chainElement>

            <sequential>

              <!--Run Merge Job with 17.6.51 makes hit file compatible with 17.3.13-->
              <chainElement>
                <jobTransform userJobId="ATLFASTIIF_minbias_2merge">
                  <doc>Merge job for backward compatibility with 17.3.13</doc>
                  <jobTransformJobName>ATLFASTIIF_minbias_2merge</jobTransformJobName>
                  <jobTransformCmd>HITSMerge_tf.py --inputHITSFile='Hits.pool.root' --outputHITS_MRGFile='Merge.pool.root' --maxEvents=-1 --skipEvents='0' --geometryVersion='ATLAS-R2-2015-03-01-00' --conditionsTag='OFLCOND-RUN12-SDR-19'</jobTransformCmd>
                  <group>ISF_Validation</group>
                  <chaindataset_info>
                    <jobTransformData/>
                    <chaindatasetName>Hits.pool.root</chaindatasetName>
                    <dataset_info>
                      <jobTransformData/>
                      <datasetName>/afs/cern.ch/atlas/offline/external/FullChainTest/long/rtt.fallback/MC12/MC12.108351.pythia_minbias.8TeV.HITS.pool.root</datasetName>
                    </dataset_info>
                  </chaindataset_info>
                  <queue>short</queue>
                </jobTransform>
                <chainfileout>
                  Merge.pool.root
                </chainfileout>
              </chainElement>

              <!-- Run Digitization + Reconstruction -->
              <chainElement>
                <jobTransform userJobId="ATLFASTIIF_minbias_3digireco">
                  <doc>reco</doc>
                  <jobTransformJobName>ATLFASTIIF_minbias_3digireco</jobTransformJobName>
                  <jobTransformCmd>Reco_tf.py --digiSteeringConf 'StandardSignalOnlyTruth' --conditionsTag 'default:OFLCOND-MC15c-SDR-09' --postInclude 'default:RecJobTransforms/UseFrontier.py' 'HITtoRDO:DigitizationTests/postInclude.RDO_Plots.py' --autoConfiguration 'everything' --steering 'doRDO_TRIG' --geometryVersion 'default:ATLAS-R2-2015-03-01-00' --DataRunNumber '267599' --preExec 'all:rec.Commissioning.set_Value_and_Lock(True);from AthenaCommon.BeamFlags import jobproperties;jobproperties.Beam.numberOfCollisions.set_Value_and_Lock(0.0);from LArROD.LArRODFlags import larRODFlags;larRODFlags.NumberOfCollisions.set_Value_and_Lock(0);larRODFlags.nSamples.set_Value_and_Lock(4);larRODFlags.doOFCPileupOptimization.set_Value_and_Lock(True);larRODFlags.firstSample.set_Value_and_Lock(0);larRODFlags.useHighestGainAutoCorr.set_Value_and_Lock(True)' 'RAWtoESD:from CaloRec.CaloCellFlags import jobproperties;jobproperties.CaloCellFlags.doLArCellEmMisCalib=False;from InDetRecExample.InDetJobProperties import InDetFlags;InDetFlags.doStandardPlots.set_Value_and_Lock(True)' 'ESDtoAOD:TriggerFlags.AODEDMSet="AODFULL"' 'RAWtoESD:from InDetRecExample.InDetJobProperties import InDetFlags;InDetFlags.doSlimming.set_Value_and_Lock(False)' 'ESDtoAOD:from InDetRecExample.InDetJobProperties import InDetFlags;InDetFlags.doSlimming.set_Value_and_Lock(False)' --numberOfCavernBkg '0' --postExec 'all:CfgMgr.MessageSvc().setError+=["HepMcParticleLink"]' "ESDtoAOD:fixedAttrib=[s if \"CONTAINER_SPLITLEVEL = \'99\'\" not in s else \"\" for s in svcMgr.AthenaPoolCnvSvc.PoolAttributes];svcMgr.AthenaPoolCnvSvc.PoolAttributes=fixedAttrib" --inputHITSFile 'Merge.pool.root' --outputRDOFile 'RDO.pool.root' --outputESDFile 'ESD.pool.root' --outputAODFile 'AOD.pool.root' --outputNTUP_PHYSVALFile 'PhysValMon.root' --validationFlags 'doInDet,doJet,doMuon,doEgamma' --maxEvents '2000' --jobNumber '1'</jobTransformCmd>
                  <group>ISF_Validation</group>
                  <chaindataset_info>
                    <jobTransformData/>
                    <chaindatasetName>Merge.pool.root</chaindatasetName>
                    <dataset_info>
                      <jobTransformData/>
                      <datasetName>/afs/cern.ch/atlas/offline/external/FullChainTest/long/rtt.fallback/MC12/MC12.108351.pythia_minbias.8TeV.HITS.pool.root</datasetName> <!-- TODO: change this to minbias dataset -->
                    </dataset_info>
                  </chaindataset_info>
                  <queue>long</queue>
                </jobTransform>
              </chainElement>
              <parallel>
                <chainElement>
                  <jobTransform userJobId="ATLFASTIIF_minbias_3digireco_Reg">
                    <doc>Regression test between builds</doc>
                    <jobTransformJobName>ATLFASTIIF_minbias_3digireco_Reg</jobTransformJobName>
                    <jobTransformCmd>sim_reg_test.py ATLFASTIIF_minbias_3digireco InDetStandardPlots.root PhysValMon.root RDO_truth.root</jobTransformCmd>
                    <group>ISF_Validation_RecoRegressionTests</group>
                    <queue>medium</queue>
                  </jobTransform>
                </chainElement>
                <chainElement>
                  <jobTransform userJobId="ATLFASTIIF_minbias_3digireco_Compare_MCProd_G4">
                    <doc>comparison to MC12 ATLFASTII references</doc>
                    <jobTransformJobName>ATLFASTIIF_minbias_3digireco_Compare_MCProd_G4</jobTransformJobName>
                    <jobTransformCmd>sim_reg_test.py ATLFASTIIF_minbias_3digireco InDetStandardPlots.root PhysValMon.root RDO_truth.root</jobTransformCmd>
                    <group>ISF_Validation</group>
                    <queue>short</queue>
                    <test position="1">
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/minbias_G4_2000evt.InDetStandardPlots.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/minbias_G4_2000evt.InDetStandardPlots.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.InDetStandardPlots.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/minbias_G4_2000evt.InDetStandardPlots.root/today.InDetStandardPlots.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/minbias_G4_2000evt.PhysValMon.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/minbias_G4_2000evt.PhysValMon.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.PhysValMon.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/minbias_G4_2000evt.PhysValMon.root/today.PhysValMon.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/minbias_G4_2000evt.RDO_truth.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/minbias_G4_2000evt.RDO_truth.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.RDO_truth.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/minbias_G4_2000evt.RDO_truth.root/today.RDO_truth.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <testToRemove>
                      <jobGroupName>RTT:Top</jobGroupName>
                      <testidentifier>CheckFileRunner0</testidentifier>
                    </testToRemove>
                  </jobTransform>
                </chainElement>
                <chainElement>
                  <jobTransform userJobId="ATLFASTIIF_minbias_3digireco_Compare_MCProd_AFII">
                    <doc>comparison to MC12 ATLFASTII references</doc>
                    <jobTransformJobName>ATLFASTIIF_minbias_3digireco_Compare_MCProd_AFII</jobTransformJobName>
                    <jobTransformCmd>sim_reg_test.py ATLFASTIIF_minbias_3digireco InDetStandardPlots.root PhysValMon.root RDO_truth.root</jobTransformCmd>
                    <group>ISF_Validation</group>
                    <queue>short</queue>
                    <test position="1">
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/minbias_ATLFASTII_2000evt.InDetStandardPlots.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/minbias_ATLFASTII_2000evt.InDetStandardPlots.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.InDetStandardPlots.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/minbias_ATLFASTII_2000evt.InDetStandardPlots.root/today.InDetStandardPlots.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/minbias_ATLFASTII_2000evt.PhysValMon.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/minbias_ATLFASTII_2000evt.PhysValMon.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.PhysValMon.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/minbias_ATLFASTII_2000evt.PhysValMon.root/today.PhysValMon.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/minbias_ATLFASTII_2000evt.RDO_truth.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/minbias_ATLFASTII_2000evt.RDO_truth.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.RDO_truth.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/minbias_ATLFASTII_2000evt.RDO_truth.root/today.RDO_truth.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <testToRemove>
                      <jobGroupName>RTT:Top</jobGroupName>
                      <testidentifier>CheckFileRunner0</testidentifier>
                    </testToRemove>
                  </jobTransform>
                </chainElement>

                <chainElement>
                  <jobTransform userJobId="ATLFASTIIF_minbias_3digireco_Compare_MCProd_AFIIF">
                    <doc>comparison to MC12 ATLFASTII references</doc>
                    <jobTransformJobName>ATLFASTIIF_minbias_3digireco_Compare_MCProd_AFIIF</jobTransformJobName>
                    <jobTransformCmd>sim_reg_test.py ATLFASTIIF_minbias_3digireco InDetStandardPlots.root PhysValMon.root RDO_truth.root</jobTransformCmd>
                    <group>ISF_Validation</group>
                    <queue>short</queue>
                    <test position="1">
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/minbias_ATLFASTIIF_2000evt.InDetStandardPlots.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/minbias_ATLFASTIIF_2000evt.InDetStandardPlots.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.InDetStandardPlots.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/minbias_ATLFASTIIF_2000evt.InDetStandardPlots.root/today.InDetStandardPlots.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/minbias_ATLFASTIIF_2000evt.PhysValMon.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/minbias_ATLFASTIIF_2000evt.PhysValMon.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.PhysValMon.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/minbias_ATLFASTIIF_2000evt.PhysValMon.root/today.PhysValMon.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <test>
                      <modulename>RttLibraryTools</modulename>
                      <testname>DCubeRunner</testname>
                      <arg>
                        <argname>DCubeCfg</argname>
                        <argvalue>MCProd/minbias_ATLFASTIIF_2000evt.RDO_truth.root.xml</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeRef</argname>
                        <argvalue>MCProd/minbias_ATLFASTIIF_2000evt.RDO_truth.root</argvalue>
                      </arg>
                      <arg>
                        <argname>DCubeMon</argname>
                        <argvalue>today.RDO_truth.root</argvalue>
                      </arg>
                      <keepFilePattern>DCube-MCProd/minbias_ATLFASTIIF_2000evt.RDO_truth.root/today.RDO_truth.root.dcube.xml.php</keepFilePattern>
                      <noalarm />
                    </test>
                    <testToRemove>
                      <jobGroupName>RTT:Top</jobGroupName>
                      <testidentifier>CheckFileRunner0</testidentifier>
                    </testToRemove>
                  </jobTransform>
                </chainElement>


              </parallel>
            </sequential>

          </parallel>
        </sequential>

      </chain>



    </jobList>


    <jobGroups>
      <jobGroup name="ISF_Validation" parent="Top">
        <keepFilePattern>*.root</keepFilePattern>
        <keepFilePattern>*.txt</keepFilePattern>
        <keepFilePattern>*.out</keepFilePattern>
        <keepFilePattern>*.html</keepFilePattern>
        <keepFilePattern>prof/*.html</keepFilePattern>
        <keepFilePattern>*.php</keepFilePattern>
        <keepFilePattern>*log</keepFilePattern>
        <keepFilePattern>log*</keepFilePattern>
        <keepFilePattern>*.diffPool</keepFilePattern>
        <keepFilePattern>test.athena.profile</keepFilePattern>
      </jobGroup>
      <jobGroup name="ISF_Validation_HitsRegressionTests" parent="Top">
        <keepFilePattern>*.root</keepFilePattern>
        <keepFilePattern>*.txt</keepFilePattern>
        <keepFilePattern>*.out</keepFilePattern>
        <keepFilePattern>*.html</keepFilePattern>
        <keepFilePattern>prof/*.html</keepFilePattern>
        <keepFilePattern>*.php</keepFilePattern>
        <keepFilePattern>*log</keepFilePattern>
        <keepFilePattern>*.diffPool</keepFilePattern>
        <keepFilePattern>*.diffRoot</keepFilePattern>
        <keepFilePattern>test.athena.profile</keepFilePattern>
        <test position="1">
          <modulename>RttLibraryTools</modulename>
          <testname>DiffPoolFilesRunner</testname>
          <testidentifier>HITS_RegressionTestDiffPoolRunner</testidentifier>
          <arg>
            <argname>fileName</argname>
            <argvalue>today.Hits.pool.root</argvalue>
          </arg>
          <arg>
            <argname>refFileName</argname>
            <argvalue>yesterday.Hits.pool.root</argvalue>
          </arg>
          <keepFilePattern>today.Hits.pool.root_yesterday.Hits.pool.root.diffPool</keepFilePattern>
        </test>
        <test position="2">
          <modulename>FlexibleDiffPoolFilesRunner</modulename>
          <testname>FlexibleDiffPoolFilesRunner</testname>
          <testidentifier>HITS_RegressionTestDiffRootRunner</testidentifier>
          <arg>
            <argname>platformDependent</argname>
            <argvalue>True</argvalue>
          </arg>
          <arg>
            <argname>optionString</argname>
            <argvalue>--ignore-leaves RecoTimingObj_p1_EVNTtoHITS_timings</argvalue>
          </arg>
          <arg>
            <argname>doDetailedChecks</argname>
            <argvalue>True</argvalue>
          </arg>
          <arg>
            <argname>fileName</argname>
            <argvalue>today.Hits.pool.root</argvalue>
          </arg>
          <arg>
            <argname>refFileName</argname>
            <argvalue>yesterday.Hits.pool.root</argvalue>
          </arg>
          <arg>
            <argname>testOutputFile</argname>
            <argvalue>today.Hits.pool.root_yesterday.Hits.pool.root.diffRoot</argvalue>
          </arg>
          <keepFilePattern>today.Hits.pool.root_yesterday.Hits.pool.root.diffRoot</keepFilePattern>
        </test>
        <test position="3">
          <modulename>RttLibraryTools</modulename>
          <testname>DCubeRunner</testname>
          <arg>
            <argname>DCubeCfg</argname>
            <argvalue>MCProd/HITS_truth.root.xml</argvalue>
          </arg>
          <arg>
            <argname>DCubeRef</argname>
            <argvalue>yesterday.truth.root</argvalue>
          </arg>
          <arg>
            <argname>localRefFile</argname>
            <argvalue>True</argvalue>
          </arg>
          <arg>
            <argname>DCubeMon</argname>
            <argvalue>today.truth.root</argvalue>
          </arg>
          <keepFilePattern>DCube-yesterday.truth.root/today.truth.root.dcube.xml.php</keepFilePattern>
        </test>

        <testToRemove>
          <jobGroupName>RTT:Top</jobGroupName>
          <testidentifier>CheckFileRunner0</testidentifier>
        </testToRemove>
      </jobGroup>

      <jobGroup name="ISF_Validation_RecoRegressionTests" parent="Top">
        <keepFilePattern>*.root</keepFilePattern>
        <keepFilePattern>*.txt</keepFilePattern>
        <keepFilePattern>*.out</keepFilePattern>
        <keepFilePattern>*.html</keepFilePattern>
        <keepFilePattern>prof/*.html</keepFilePattern>
        <keepFilePattern>*.php</keepFilePattern>
        <keepFilePattern>*log</keepFilePattern>
        <keepFilePattern>log.*</keepFilePattern>
        <keepFilePattern>*.diffPool</keepFilePattern>
        <keepFilePattern>test.athena.profile</keepFilePattern>
        <test position="1">
          <modulename>RttLibraryTools</modulename>
          <testname>DCubeRunner</testname>
          <arg>
            <argname>DCubeCfg</argname>
            <argvalue>MCProd/RDO_truth.root.xml</argvalue>
          </arg>
          <arg>
            <argname>DCubeRef</argname>
            <argvalue>yesterday.RDO_truth.root</argvalue>
          </arg>
          <arg>
            <argname>localRefFile</argname>
            <argvalue>True</argvalue>
          </arg>
          <arg>
            <argname>DCubeMon</argname>
            <argvalue>today.RDO_truth.root</argvalue>
          </arg>
          <keepFilePattern>DCube-yesterday.RDO_truth.root/today.RDO_truth.root.dcube.xml.php</keepFilePattern>
        </test>
        <test position="2">
          <modulename>RttLibraryTools</modulename>
          <testname>DCubeRunner</testname>
          <arg>
            <argname>DCubeCfg</argname>
            <argvalue>MCProd/PhysValMon.root.xml</argvalue>
          </arg>
          <arg>
            <argname>DCubeRef</argname>
            <argvalue>yesterday.PhysValMon.root</argvalue>
          </arg>
          <arg>
            <argname>localRefFile</argname>
            <argvalue>True</argvalue>
          </arg>
          <arg>
            <argname>DCubeMon</argname>
            <argvalue>today.PhysValMon.root</argvalue>
          </arg>
          <keepFilePattern>DCube-yesterday.PhysValMon.root/today.PhysValMon.root.dcube.xml.php</keepFilePattern>
        </test>
        <test position="3">
          <modulename>RttLibraryTools</modulename>
          <testname>DCubeRunner</testname>
          <arg>
            <argname>DCubeCfg</argname>
            <argvalue>MCProd/InDetStandardPlots.root.xml</argvalue>
          </arg>
          <arg>
            <argname>DCubeRef</argname>
            <argvalue>yesterday.InDetStandardPlots.root</argvalue>
          </arg>
          <arg>
            <argname>localRefFile</argname>
            <argvalue>True</argvalue>
          </arg>
          <arg>
            <argname>DCubeMon</argname>
            <argvalue>today.InDetStandardPlots.root</argvalue>
          </arg>
          <keepFilePattern>DCube-yesterday.InDetStandardPlots.root/today.InDetStandardPlots.root.dcube.xml.php</keepFilePattern>
        </test>
        <testToRemove>
          <jobGroupName>RTT:Top</jobGroupName>
          <testidentifier>CheckFileRunner0</testidentifier>
        </testToRemove>
      </jobGroup>

      <jobGroup name="ISF_Validation_sim" parent="Top">
        <keepFilePattern>*.root</keepFilePattern>
        <keepFilePattern>*.txt</keepFilePattern>
        <keepFilePattern>*.out</keepFilePattern>
        <keepFilePattern>*.html</keepFilePattern>
        <keepFilePattern>prof/*.html</keepFilePattern>
        <keepFilePattern>*.php</keepFilePattern>
        <keepFilePattern>*log</keepFilePattern>
        <keepFilePattern>log.*</keepFilePattern>
        <keepFilePattern>*.diffPool</keepFilePattern>
        <keepFilePattern>test.athena.profile</keepFilePattern>
        <test>
          <modulename>RttLibraryTools</modulename>
          <testname>FileGrepper</testname>
          <outputFile>fileGrepper_results.txt</outputFile>
          <testidentifier>FileGrepperA</testidentifier>
          <arg>
            <argname>inputFile</argname>
            <argvalue>log.EVNTtoHITS</argvalue>
          </arg>
          <arg>
            <fileGrepperArgs>
              <!-- search pattern block -->
              <fileGrepperSearchPattern>
                <fileGrepperPattern>leaving with code 0</fileGrepperPattern>
              </fileGrepperSearchPattern>
              <!-- veto pattern block -->
              <fileGrepperVetoPattern>
                <fileGrepperPattern>(segmentation violation|bus error|Event was aborted)</fileGrepperPattern>
              </fileGrepperVetoPattern>
              <fileGrepperVetoPattern>
                <!-- This looks for StuckTrack that is not due to a CSCspacer -->
                <fileGrepperPattern>\*\*\* G4Exception : StuckTrack(?!([^\n]*\n){4}([^\n]*?)CSCspacer)</fileGrepperPattern>
                <compileFlags>S</compileFlags>
              </fileGrepperVetoPattern>
            </fileGrepperArgs>
          </arg>
          <keepFilePattern>fileGrepper_results.txt</keepFilePattern>
        </test>
        <test> <!-- Special Test for InfiniteLoop G4Exceptions should remove once it starts failing.. -->
          <modulename>RttLibraryTools</modulename>
          <testname>FileGrepper</testname>
          <outputFile>InfiniteLoopGrepper_results.txt</outputFile>
          <testidentifier>InfiniteLoopGrepper</testidentifier>
          <arg>
            <argname>inputFile</argname>
            <argvalue>log.EVNTtoHITS</argvalue>
          </arg>
          <arg>
            <fileGrepperArgs>
              <!-- veto pattern block -->
              <fileGrepperVetoPattern>
                <fileGrepperPattern>G4Exception : InfiniteLoop</fileGrepperPattern>
                <compileFlags>S</compileFlags>
              </fileGrepperVetoPattern>
            </fileGrepperArgs>
          </arg>
          <keepFilePattern>InfiniteLoopGrepper_results.txt</keepFilePattern>
        </test>
        <test> <!-- Special Test for StrangePDG G4Exceptions should remove once it starts failing.. -->
          <modulename>RttLibraryTools</modulename>
          <testname>FileGrepper</testname>
          <outputFile>StrangePDGGrepper_results.txt</outputFile>
          <testidentifier>StrangePDGGrepper</testidentifier>
          <arg>
            <argname>inputFile</argname>
            <argvalue>log.EVNTtoHITS</argvalue>
          </arg>
          <arg>
            <fileGrepperArgs>
              <!-- veto pattern block -->
              <fileGrepperVetoPattern>
                <fileGrepperPattern>G4Exception : PART102</fileGrepperPattern>
                <compileFlags>S</compileFlags>
              </fileGrepperVetoPattern>
            </fileGrepperArgs>
          </arg>
          <keepFilePattern>StrangePDGGrepper_results.txt</keepFilePattern>
        </test>
        <test> <!-- Special Test for uninitialized random stream seeds should remove once it starts failing.. -->
          <modulename>RttLibraryTools</modulename>
          <testname>FileGrepper</testname>
          <outputFile>DefaultSeedsGrepper_results.txt</outputFile>
          <testidentifier>DefaultSeedsGrepper</testidentifier>
          <arg>
            <argname>inputFile</argname>
            <argvalue>log.EVNTtoHITS</argvalue>
          </arg>
          <arg>
            <fileGrepperArgs>
              <!-- veto pattern block -->
              <fileGrepperVetoPattern>
                <fileGrepperPattern>DEFAULT seeds</fileGrepperPattern>
                <compileFlags>S</compileFlags>
              </fileGrepperVetoPattern>
            </fileGrepperArgs>
          </arg>
          <keepFilePattern>DefaultSeedsGrepper_results.txt</keepFilePattern>
        </test>

      </jobGroup>

    </jobGroups>

  </rtt>

</unifiedTestConfiguration>
