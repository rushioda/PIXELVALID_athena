# **********************************************************************
# $Id: $
# **********************************************************************

#######################
# HLT Offline Shifter 
#######################

#######################
# Output
#######################

output top_level {

  output HLT {
    output OfflineShifter {
      output Et-Pt-Spectra {
        output BPhys {
        }
        output Egamma {
        }
        output Jets {
          output j25 {
          }
          output j200 {
          }
        }
        output Muons {
        }
        output Tau {
        }
      }
      output Eta-Phi-Maps {
        output Calo {
        }
        output Jets {
          output j25 {
          }
          output j200 {
          }
        }
        output MET {
        }
        output Muons {
        }
        output Tau {
        }
        output Egamma {
        }
      }
      output InvariantMasses {
      }
      output Misc {
##        output Bjet {
##        }
##        output InDet {
##        }
##        output Muons {
##        }
        output MissingET {
        }
        output Tau {
        }
        output Egamma {
        }
        output MinBias {
        }
      }
      output Multiplicities {
##        output Bjet {
##        }
        output Jets {
        }
        output Muons {
        }
        output Tau {
        }
      }
    }
  }
}


#######################
# Histogram Assessments
#######################


#######################
## Eta-Phi-Maps
#######################

dir HLT {

  #algorithm = HLT_Histogram_Not_Empty&GatherData
  #algorithm = BPhys_HistKolmogorovTest_MaxDist

  dir CaloMon {
    hist EnergyAccetaphiTile@Shifter {
        algorithm = HLT_Histogram_Not_Empty&GatherData 
##        algorithm = HLT_PassInput
        output = HLT/OfflineShifter/Eta-Phi-Maps/Calo
    }
    hist EnergyAccetaphiLAr@Shifter {
##        algorithm = HLT_Histogram_Not_Empty&GatherData 
        algorithm = HLT_PassInput
        output = HLT/OfflineShifter/Eta-Phi-Maps/Calo
    }
  }
  dir EgammaSigTE {
    dir OfflineElectron {
      hist egEtaPhiMap@ElectronShifter {
        algorithm = HLT_PassInput
        output = HLT/OfflineShifter/Eta-Phi-Maps/Egamma
      }
    }
    dir OfflinePhoton {
      hist egEtaPhiMap@PhotonShifter {
##        algorithm = HLT_PassInput
        algorithm = HLT_Histogram_Not_Empty&GatherData 
        output = HLT/OfflineShifter/Eta-Phi-Maps/Egamma
      }
    }
  }
  dir JetMon {
    dir HLT {
      dir a10tcemsubFS {
        hist HLTJet_phi_vs_eta@a10tcemsubFSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Eta-Phi-Maps/Jets
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
      dir a4tcemjesFS {
        hist HLTJet_phi_vs_eta@a4tcemjesFSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Eta-Phi-Maps/Jets
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
      dir a4tcemjesPS {
        hist HLTJet_phi_vs_eta@a4tcemjesPSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Eta-Phi-Maps/Jets
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
      dir a4tcemsubFS {
        hist HLTJet_phi_vs_eta@a4tcemsubFSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Eta-Phi-Maps/Jets
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
      dir a4tcemsubjesFS {
        hist HLTJet_phi_vs_eta@a4tcemsubjesFSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Eta-Phi-Maps/Jets
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
      dir a4tclcwjesFS {
        hist HLTJet_phi_vs_eta@a4tclcwjesFSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Eta-Phi-Maps/Jets
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
      dir j25 {
        hist HLTJet_phi_vs_eta@j25Shifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Eta-Phi-Maps/Jets/j25
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
      dir j200_jes_PS {
        hist HLTJet_phi_vs_eta@j200_jes_PSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Eta-Phi-Maps/Jets/j200
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
    }
    dir OF {
      dir AntiKt10LCTopoJets {
        hist OFJet_phi_vs_eta@AntiKt10LCTopoJetsShifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData 
	  output = HLT/OfflineShifter/Eta-Phi-Maps/Jets
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
      dir AntiKt4EMTopoJets {
        hist OFJet_phi_vs_eta@AntiKt4EMTopoJetsShifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData 
	  output = HLT/OfflineShifter/Eta-Phi-Maps/Jets
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
      dir AntiKt4LCTopoJets {
        hist OFJet_phi_vs_eta@AntiKt4LCTopoJetsShifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData 
	  output = HLT/OfflineShifter/Eta-Phi-Maps/Jets
	  description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
    }
  }
  dir METMon {
    dir Shifter {
      dir HLT {
        hist HLT_MET_etaphi1@Shifter {
          ##HLT_MET_etaphi1 will be renamed to HLT_MET_etaphi_etweight
          algorithm = HLT_Histogram_Not_Empty&GatherData
          output = HLT/OfflineShifter/Eta-Phi-Maps/MET
          description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
        hist HLT_MET_etaphi_etweight@Shifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData
          output = HLT/OfflineShifter/Eta-Phi-Maps/MET
          description = Particular attention should be paid in checking hot regions. When HLT_MET_etaphi show peaks, this plot is a good check if the peaks are problematic or not. If this plot has no peak, it means the peaks in HLT_MET_etaphi are from low energy hot sopts and has no real harm. When HLT_MET_etaphi does not have peaks, it is all right even if this plot show peaks because those peaks are due to a few very high pt jets.
        }
        hist HLT_MET_etaphi@Shifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData
          output = HLT/OfflineShifter/Eta-Phi-Maps/MET
          description = Particular attention should be paid in checking hot regions. The distribution should not show peaks.
        }
      }
    }
  }
  dir MuonMon {
    dir muComb {
      hist muComb_eta_vs_phi@Shifter {
        algorithm = HLT_PassInput
        output = HLT/OfflineShifter/Eta-Phi-Maps/Muons
      } 
    }
    dir muFast {
      hist muFast_eta_vs_phi@Shifter {
##        algorithm = HLT_Histogram_Not_Empty&GatherData 
        algorithm = HLT_PassInput
        output = HLT/OfflineShifter/Eta-Phi-Maps/Muons
      }
    }
    dir MuonEF {
      hist EFCB_eta_vs_phi@Shifter {
        algorithm = HLT_PassInput
        output = HLT/OfflineShifter/Eta-Phi-Maps/Muons
      }
    }
  }
  dir TauMon {
    dir Shifter {
      dir lowest_singletau {
        dir EFTau {
          hist hEFEtaVsPhi_shifter@Shifter {
            algorithm = HLT_PassInput
            output = HLT/OfflineShifter/Eta-Phi-Maps/Tau
          }
        }
        dir L1RoI {
          hist hL1EtaVsPhi_shifter@Shifter {
            algorithm = HLT_PassInput
##            algorithm = HLT_Histogram_Not_Empty&GatherData
            description = The L1 eta-phi map. Should not be empty.
            output = HLT/OfflineShifter/Eta-Phi-Maps/Tau
          }
          hist hL1RoIEta_shifter@Shifter {
            description = The L1 eta distribution. Should not be empty.
            algorithm = HLT_Histogram_Not_Empty&GatherData
            output = HLT/OfflineShifter/Eta-Phi-Maps/Tau
          }
          hist hL1RoIPhi_shifter@Shifter { 
            output = HLT/OfflineShifter/Eta-Phi-Maps/Tau
            algorithm = HLT_Histogram_Not_Empty&GatherData
            description = The L1 phi distribution. Should not be empty. 
          }
        }
      }
    }
  }

  dir ResultMon {
    dir AllChains {
      hist AllChainsRoIs@Shifter {
##        regex = 1
        algorithm = HLT_Histogram_Not_Empty&GatherData
##        algorithm = HLT_PassInput
        output = HLT/OfflineShifter/Eta-Phi-Maps
      }
    }
    
    dir Electrons {
      hist ElectronsRoIs@Shifter {
        regex = 1
        algorithm = HLT_PassInput
##        algorithm = HLT_Histogram_Not_Empty&GatherData
        output = HLT/OfflineShifter/Eta-Phi-Maps
      }
    }
    
    dir Gamma {
      hist GammaRoIs@Shifter {
        regex = 1
        algorithm = HLT_PassInput
##        algorithm = HLT_Histogram_Not_Empty&GatherData
        output = HLT/OfflineShifter/Eta-Phi-Maps
      }
    }
    
    dir Jets {
      hist JetsRoIs@Shifter {
        regex = 1
        algorithm = HLT_PassInput
##        algorithm = HLT_Histogram_Not_Empty&GatherData
        output = HLT/OfflineShifter/Eta-Phi-Maps
      }
    }
    
    dir Muons {
      hist MuonsRoIs@Shifter {
        regex = 1
        algorithm = HLT_PassInput
##        algorithm = HLT_Histogram_Not_Empty&GatherData
        output = HLT/OfflineShifter/Eta-Phi-Maps
      }
    }
    
    dir Taus {
      hist TausRoIs@Shifter {
        regex = 1
        algorithm = HLT_PassInput
##        algorithm = HLT_Histogram_Not_Empty&GatherData
        output = HLT/OfflineShifter/Eta-Phi-Maps
      }
    }
       
  }




####################
## Et-Pt-Spectra
####################

  dir BphysMon {
    dir shifter {
      dir Containers {
        dir HLT_xAOD__TrigBphysContainer_EFBMuMuFex {
          hist TrigBphys_HLT_xAOD__TrigBphysContainer_EFBMuMuFex_pTsum@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
            algorithm = HLT_PassInput
            output = HLT/OfflineShifter/Et-Pt-Spectra/BPhys
            description = Sum of J/psi muons pT from the EF container. May be slightly different from reference due to different menu (the container is used for a few chains at once)
	  }
        }
##        dir HLT_xAOD__TrigBphysContainer_EFBMuMuXFex {
##          hist TrigBphys_HLT_xAOD__TrigBphysContainer_EFBMuMuXFex_pTsum@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
##            output = HLT/OfflineShifter/Et-Pt-Spectra/BPhys
##	  }
##        }
##        dir HLT_xAOD__TrigBphysContainer_EFBMultiMuFex {
##          hist TrigBphys_HLT_xAOD__TrigBphysContainer_EFBMultiMuFex_pTsum@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
##            output = HLT/OfflineShifter/Et-Pt-Spectra/BPhys
##	  }
##        }
##        dir HLT_xAOD__TrigBphysContainer_EFTrackMass {
##          hist TrigBphys_HLT_xAOD__TrigBphysContainer_EFTrackMass_pTsum@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
##            output = HLT/OfflineShifter/Et-Pt-Spectra/BPhys
##	  }
##        }
        dir HLT_xAOD__TrigBphysContainer_L2BMuMuFex {
          hist TrigBphys_HLT_xAOD__TrigBphysContainer_L2BMuMuFex_pTsum@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
            algorithm = HLT_PassInput
            output = HLT/OfflineShifter/Et-Pt-Spectra/BPhys
            description = Sum of J/psi muons pT from the L2 container. May be slightly different from reference due to different menu (the container is used for a few chains at once)
	  }
        }
##        dir HLT_xAOD__TrigBphysContainer_L2BMuMuXFex {
##          hist TrigBphys_HLT_xAOD__TrigBphysContainer_L2BMuMuXFex_pTsum@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
##            output = HLT/OfflineShifter/Et-Pt-Spectra/BPhys
##	  }
##        }
##        dir HLT_xAOD__TrigBphysContainer_L2BMultiMuFex {
##          hist TrigBphys_HLT_xAOD__TrigBphysContainer_L2BMultiMuFex_pTsum@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
##            output = HLT/OfflineShifter/Et-Pt-Spectra/BPhys
##	  }
##        }
##        dir HLT_xAOD__TrigBphysContainer_L2TrackMass {
##          hist TrigBphys_HLT_xAOD__TrigBphysContainer_L2TrackMass_pTsum@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
##            output = HLT/OfflineShifter/Et-Pt-Spectra/BPhys
##	  }
##        }

      }
      dir BMuMu {
        hist TrigBphys_BMuMu_pTsum@Shifter {
##          algorithm = HLT_Histogram_Not_Empty&GatherData
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Et-Pt-Spectra/BPhys
          description = Sum of J/psi muons pT, the histogram is filled from a particular HLT_2muX_bDimu chain
        }
        hist TrigBphys_BMuMu_eta@Shifter {
##          algorithm = HLT_Histogram_Not_Empty&GatherData
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Et-Pt-Spectra/BPhys
          description = Pseudorapidity of J/psi, the histogram is filled from a particular HLT_2muX_bDimu chain
        }
      }


    }
  }


  dir EgammaSigTE {
    dir OfflineElectron {
      hist egEt@ShifterElectron {
        algorithm = HLT_Histogram_Not_Empty&GatherData
##        algorithm = HLT_PassInput
        output = HLT/OfflineShifter/Et-Pt-Spectra/Egamma

      }
    }
    dir OfflinePhoton {
      hist egEt@ShifterPhoton {
        algorithm = HLT_Histogram_Not_Empty&GatherData
        output = HLT/OfflineShifter/Et-Pt-Spectra/Egamma

      }
    }
  }


  dir JetMon {
    dir HLT {
      dir a10tcemsubFS {
        hist HLTJet_Et@a10tcemsubFSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Et-Pt-Spectra/Jets
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
      dir a4tcemjesFS {
        hist HLTJet_Et@a4tcemjesFSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Et-Pt-Spectra/Jets
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
      dir a4tcemjesPS {
        hist HLTJet_Et@a4tcemjesPSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Et-Pt-Spectra/Jets
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
      dir a4tcemsubFS {
        hist HLTJet_Et@a4tcemsubFSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Et-Pt-Spectra/Jets
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
      dir a4tcemsubjesFS {
        hist HLTJet_Et@a4tcemsubjesFSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Et-Pt-Spectra/Jets
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
      dir a4tclcwjesFS {
        hist HLTJet_Et@a4tclcwjesFSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Et-Pt-Spectra/Jets
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
      dir j25 {
        hist HLTJet_Et@j25Shifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Et-Pt-Spectra/Jets/j25
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
      dir j200_jes_PS {
        hist HLTJet_Et@j200_jes_PSShifter {
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/Et-Pt-Spectra/Jets/j200
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
    }

    dir OF {
      dir AntiKt10LCTopoJets {
        hist OFJet_Et@AntiKt10LCTopoJetsShifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData 
	  output = HLT/OfflineShifter/Et-Pt-Spectra/Jets
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
      dir AntiKt4EMTopoJets {
        hist OFJet_Et@AntiKt4EMTopoJetsShifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData 
	  output = HLT/OfflineShifter/Et-Pt-Spectra/Jets
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
      dir AntiKt4LCTopoJets {
        hist OFJet_Et@AntiKt4LCTopoJetsShifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData 
	  output = HLT/OfflineShifter/Et-Pt-Spectra/Jets
	  description = The distribution should not be broad. Check with reference when available.
        }
      }
    }
  }
  dir MuonMon {
    dir muComb {
      hist muComb_pt@Shifter {
        algorithm = HLT_PassInput
        output = HLT/OfflineShifter/Et-Pt-Spectra/Muons
      } 
    }
    dir muFast {
      hist muFast_pt@Shifter {
        algorithm = HLT_PassInput
##        algorithm = HLT_Histogram_Not_Empty&GatherData 
        output = HLT/OfflineShifter/Et-Pt-Spectra/Muons
      }
    }
    dir MuonEF {
      hist EFCB_pt@Shifter {
        algorithm = HLT_PassInput
        output = HLT/OfflineShifter/Et-Pt-Spectra/Muons
      }
    }
  }
  dir TauMon {
    dir Shifter {
      dir lowest_singletau {
        dir EFTau {
          hist hEFEt_shifter@Shifter {
            algorithm = HLT_Histogram_Not_Empty&GatherData 
	    output = HLT/OfflineShifter/Et-Pt-Spectra/Tau
            description = Should not be empty.
          }
          hist hEFEtRaw_shifter@Shifter {
            algorithm = HLT_Histogram_Not_Empty&GatherData 
	    output = HLT/OfflineShifter/Et-Pt-Spectra/Tau
            description = Should not be empty.
          }
        }
        dir L1RoI {
          hist hL1RoITauClus_shifter@Shifter {
            algorithm = HLT_Histogram_Not_Empty&GatherData 
	    output = HLT/OfflineShifter/Et-Pt-Spectra/Tau
            description = The L1 RoI Et. Should not be empty. 
          }
          hist hL1RoIEMIso_shifter@Shifter {
            algorithm = HLT_Histogram_Not_Empty&GatherData 
	    output = HLT/OfflineShifter/Et-Pt-Spectra/Tau
            description = The isolation energy used for the L1 isolation cut. Should not be empty.
          }
        }
      }
    }
  }


#####################
## InvariantMasses
#####################

  dir BphysMon {
    dir shifter {
      dir Containers {
        dir HLT_xAOD__TrigBphysContainer_EFBMuMuFex {
          hist TrigBphys_HLT_xAOD__TrigBphysContainer_EFBMuMuFex_mass@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
            algorithm = HLT_PassInput
            output = HLT/OfflineShifter/InvariantMasses
            description = Dimuon invariant mass, the histogram is filled from the EF container which is used for a few chains at once
	  }
        }
        dir HLT_xAOD__TrigBphysContainer_L2BMuMuFex {
          hist TrigBphys_HLT_xAOD__TrigBphysContainer_L2BMuMuFex_mass@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
            algorithm = HLT_PassInput
            output = HLT/OfflineShifter/InvariantMasses
            description = Dimuon invariant mass, the histogram is filled from the L2 container which is used for a few chains at once
	  }
        }
      }
      dir BMuMu {
        hist TrigBphys_BMuMu_mass@Shifter {
##          algorithm = HLT_Histogram_Not_Empty&GatherData
          algorithm = HLT_PassInput
          output = HLT/OfflineShifter/InvariantMasses
          description = Dimuon invariant mass, the histogram is filled from a particular HLT_2muX_bDimu chain. Normally J/psi and Upsilon mass peaks should be seen
        }
      }
    }
  }

####################
## Misc
####################

##  dir BjetMon {
##    dir Shifter {
##      hist xAOD_Counters@Shifter {
##        output = HLT/OfflineShifter/Misc/Bjet
##        algorithm = HLT_Histogram_Not_Empty&GatherData
##        description = Description? 
##      }
##    }
##  }

  dir METMon {
    dir Shifter {
      dir HLT {
        hist HLT_MET@Shifter {
        ##new
          algorithm = HLT_Histogram_Not_Empty&GatherData
          output = HLT/OfflineShifter/Misc/MissingET
          description = Normal: No spikes, with a single peak structure at low MET and a falling distribution. Abnormal: Spike in MET, shifter should contact expert-on-call.
        }
        hist HLT_MEx@Shifter {
        ##new
          algorithm = HLT_Histogram_Not_Empty&GatherData
          output = HLT/OfflineShifter/Misc/MissingET
          description = Normal: No spikes, with a single peak structure at 0. Abnormal: Spike other than the central peak, shifter should contact expert-on-call.
        }
        hist HLT_MEy@Shifter {
        ##new
          algorithm = HLT_Histogram_Not_Empty&GatherData
          output = HLT/OfflineShifter/Misc/MissingET
          description = Normal: No spikes, with a single peak structure at 0. Abnormal: Spike other than the central peak, shifter should contact expert-on-call.
        }
        hist HLT_SumEt@Shifter {
        ##new
          algorithm = HLT_Histogram_Not_Empty&GatherData
          output = HLT/OfflineShifter/Misc/MissingET
          description = Normal: No spikes, with a single peak structure at low SumEt and a falling distribution. Abnormal: Spike in MET, shifter should contact expert-on-call.
        }
      }
    }
    dir Expert {
      dir HLT {
##        hist HLT_MET_status@Shifter {
        ##new
##          display = TCanvas(1050,500),LogY
##          algorithm = HLTmet_AlgErrorBits
##          output = HLT/OfflineShifter/Misc/MissingET
##          description = Normal: GlobalError bin is empty (not filled). Abnormal But Not Critical: 1. Bytestream conversion errors in some components (TileBar, Gap1,2,3, Ext1,2). 2. BadCellQuality in one or more components. Abnormal and Critical: Global Error bit is set "GlobError" or Missing Components - Cross check with compN_EF_MET_status@Shifter
##        }
        hist HLT_MET_lin1@Shifter {
        ##new
          display = <AxisRange(0,100,"X")>,LogY
          algorithm = HLT_PassInput
##          algorithm = HLT_Histogram_Not_Empty&GatherData
          output = HLT/OfflineShifter/Misc/MissingET
          description = Normal: No spikes, with a single dip structure and a falling distribution. Abnormal: Spike in EF_MET at low (< 10 GeV) MET shifter should contact expert-on-call.
        }
        hist compN_compEt_lin@Shifter {
        ##new 
          display = TCanvas(1050,500)
          algorithm = HLT_PassInput
##          algorithm = HLT_Histogram_Not_Empty&GatherData
          output = HLT/OfflineShifter/Misc/MissingET
          description = Normal: All components (X bins) are filled. Abnormal: One or more components are empty.
        }
        hist compN_HLT_MET_status@Shifter {
        ##new
          display = TCanvas(1050,500),LogZ
          algorithm = HLT_PassInput
##          algorithm = HLT_Histogram_Not_Empty&GatherData
          output = HLT/OfflineShifter/Misc/MissingET
          description = Normal: "Processed" Bit must always be set (and filled). Abnormal But Not Critical: 1. Bytestream conversion errors in some components (TileBar, Gap1,2,3, Ext1,2); 2. BadCellQuality in one or more components. Abnormal and Critical: Global Error bit is set "GlobError" or Missing components or Error in one or more components "CompError".
        }
      }
    }
  }

  dir MinBiasMon {
    dir IDMinbias {
      dir mb_sptrk {
        hist PixTot@OfflineShifter {
          output = HLT/OfflineShifter/Misc/MinBias
          algorithm = HLT_PassInput
##          algorithm = HLT_Histogram_Not_Empty&GatherData
	  description = TODO
        }
        hist SctTot@IffkubeShifter {
          output = HLT/OfflineShifter/Misc/MinBias
          algorithm = HLT_PassInput
##          algorithm = HLT_Histogram_Not_Empty&GatherData
	  description = TODO
        }
      }
    }
    dir MBTS {
      dir mb_mbts_L1MBTS_2 {
	hist Occupancy@OfflineShifter {
	  output = HLT/OfflineShifter/Misc/MinBias
          algorithm = HLT_PassInput
##	  algorithm = HLT_Histogram_Not_Empty&GatherData
	  description = TODO
	}
      }
    }
  }

##  dir MuonMon {
##    dir muComb {
##      hist muComb_ptratio_toMF@OfflineShifter {
##        output = HLT/OfflineShifter/Misc/Muons
##        algorithm = alg_muComb_ptratio
##	description = OUTDATED??? Should have a peak around 1. Please compare with reference histogram.
##        weight = 0.0
##      }
##      hist muComb_dR_toMF@OfflineShifter {
##        output = HLT/OfflineShifter/Misc/Muons
##        description = OUTDATED??? Should have a peak at small value (< 0.05). If there are many (> several %) at overflow it may indicate something. Please compare with reference histogram. 
##        algorithm = TRMUO_GatherData
##      }
##    }
##  }

  dir TauMon {
    dir Shifter {
      dir lowest_singletau {
        dir EFTau {
##          hist hEFEMRadius_shifter@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
##            reference = CentrallyManagedReferences
##            display = StatBox
##            description = OUTDATED??? Distribution should have a peak close to zero and should smoothly fall at high values.
##            output = HLT/OfflineShifter/Misc/Tau
##          }
##          hist hEFHADRadius_shifter@Shifter {
##            algorithm = HLT_Histogram_Not_Empty&GatherData
##            reference = CentrallyManagedReferences
##            display = StatBox
##            description = OUTDATED???
##            output = HLT/OfflineShifter/Misc/Tau
##          }
          hist hEFinnerTrkAvgDistMPCorr_shifter@Shifter {
            algorithm = HLT_Histogram_Not_Empty&GatherData
            reference = CentrallyManagedReferences
            display = StatBox
            description = TBD
            output = HLT/OfflineShifter/Misc/Tau
          }
          hist hEFEMFraction_shifter@Shifter {
            output = HLT/OfflineShifter/Misc/Tau
            algorithm = HLT_Histogram_Not_Empty&GatherData
            description = Fraction of EM energy w.r.t. tau energy. Should not be empty. 
          }
          hist hEFcentFrac1PCorr_shifter@Shifter {
            output = HLT/OfflineShifter/Misc/Tau
            algorithm = HLT_Histogram_Not_Empty&GatherData
            description = Fraction of energy in the core cone of the tau corrected for pileup (input for HLT BDT). Should not be empty. 
          }
        }
        dir PreselectionTau {
          hist hFTFnTrack_shifter@Shifter {
            output = HLT/OfflineShifter/Misc/Tau
            algorithm = HLT_Histogram_Not_Empty&GatherData
            description = The track multiplicity at HLT preselection (used for the HLT preselection). Should not be empty. 
          }
          hist hFTFnWideTrack_shifter@Shifter {
            output = HLT/OfflineShifter/Misc/Tau
            algorithm = HLT_Histogram_Not_Empty&GatherData
            description = The track multiplicity in the isolation ring at HLT preselection (used for the HLT preselection). Should not be empty. 
          }
        }
      }
    }
  }

#################
## Multiplicity
#################

##  dir BjetMon {
##    dir Shifter {
##      hist xAOD_nPV@Shifter {
##        algorithm = HLT_Histogram_Not_Empty&GatherData
##        description = DEFINITION???
##        output = HLT/OfflineShifter/Multiplicities/Bjet
##      }
##      hist xAOD_nTrack@Shifter {
##        algorithm = HLT_Histogram_Not_Empty&GatherData
##        description = DEFINITION???
##        output = HLT/OfflineShifter/Multiplicities/Bjet
##      }
##    }
##  }

  dir JetMon {
    dir HLT {
      dir a10tcemsubFS {
        hist HLTJet_n@a10tcemsubFSShifter {
          algorithm = HLT_PassInput
          description = Average number of jets should be the same as in the reference.
          output = HLT/OfflineShifter/Multiplicities/Jets
        }
      }
      dir a4tcemjesFS {
        hist HLTJet_n@a4tcemjesFSShifter {
          algorithm = HLT_PassInput
          description = Average number of jets should be the same as in the reference.
          output = HLT/OfflineShifter/Multiplicities/Jets
        }
      }
      dir a4tcemjesPS {
        hist HLTJet_n@a4tcemjesPSShifter {
          algorithm = HLT_PassInput
          description = Average number of jets should be the same as in the reference.
          output = HLT/OfflineShifter/Multiplicities/Jets
        }
      }
      dir a4tcemsubFS {
        hist HLTJet_n@a4tcemsubFSShifter {
          algorithm = HLT_PassInput
          description = Average number of jets should be the same as in the reference.
          output = HLT/OfflineShifter/Multiplicities/Jets
        }
      }
      dir a4tcemsubjesFS {
        hist HLTJet_n@a4tcemsubjesFSShifter {
          algorithm = HLT_PassInput
          description = Average number of jets should be the same as in the reference.
          output = HLT/OfflineShifter/Multiplicities/Jets
        }
      }
      dir a4tclcwjesFS {
        hist HLTJet_n@a4tclcwjesFSShifter {
          algorithm = HLT_PassInput
          description = Average number of jets should be the same as in the reference.
          output = HLT/OfflineShifter/Multiplicities/Jets
        }
      }
    }
    dir OF {
      dir AntiKt10LCTopoJets {
        hist OFJet_n@AntiKt10LCTopoJetsShifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData 
          description = Average number of jets should be the same as in the reference.
	  output = HLT/OfflineShifter/Multiplicities/Jets
        }
      }
      dir AntiKt4EMTopoJets {
        hist OFJet_n@AntiKt4EMTopoJetsShifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData 
          description = Average number of jets should be the same as in the reference.
	  output = HLT/OfflineShifter/Multiplicities/Jets
        }
      }
      dir AntiKt4LCTopoJets {
        hist OFJet_n@AntiKt4LCTopoJetsShifter {
          algorithm = HLT_Histogram_Not_Empty&GatherData 
          description = Average number of jets should be the same as in the reference.
	  output = HLT/OfflineShifter/Multiplicities/Jets
        }
      }
    }
  }

  dir MuonMon {
    dir TileMu {
      hist TileMu_N {
        algorithm = HLT_Histogram_Not_Empty&GatherData 
        output = HLT/OfflineShifter/Multiplicities/Muons
      }
    }
    dir Common {
      hist Offline_Number_Of_Muon {
        algorithm = HLT_Histogram_Not_Empty&GatherData 
        output = HLT/OfflineShifter/Multiplicities/Muons
      }
      hist Number_Of_ES_Triggers {
        algorithm = HLT_PassInput
##        algorithm = HLT_Histogram_Not_Empty&GatherData 
        output = HLT/OfflineShifter/Multiplicities/Muons
      }
    }
  }


##  dir TauMon {
##    dir tauNoCut_L1TAU40 {
##      dir L1RoI {
##        hist hL1RoITauClus@Shifter2 {
##          output = HLT/OfflineShifter/Et-Pt-Spectra/Tau
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          display = StatBox
##          description = This variable should have smoothly falling (exponential) distribution. Problems in the calorimeter or L1 hardware can cause a bumpy structure in the distribution.
##        }
##      }
##      dir T2CaloTau {
##        hist hEtRawNarrow@Shifter2 {
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          display = StatBox
##          output = HLT/OfflineShifter/Et-Pt-Spectra/Tau
##        }
##      }
##    } #end tauNoCut_L1TAU40
##    dir tauNoCut {
##      dir L1RoI {
##        hist hL1RoITauClus@Shifter {
##          output = HLT/OfflineShifter/Et-Pt-Spectra/Tau
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          description = This variable should have smoothly falling (exponential) distribution. Problems in the calorimeter or L1 hardware can cause a bumpy structure in the distribution.
##          display = StatBox
##        }
##        hist hL1EtaVsPhi@Shifter {
##          output = HLT/OfflineShifter/Eta-Phi-Maps/Tau
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          description = https://twiki.cern.ch/twiki/bin/view/Atlas/TauSliceDataQualityMonitoring#hEtaVsPhi
##          display = StatBox
##        }
##        hist hL1RoIEta@Shifter {
##            output = HLT/OfflineShifter/Eta-Phi-Maps/Tau
##            algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##            reference = CentrallyManagedReferences
##            description = This distribution should be approximately flat. An excess of events at a particular eta (a peak) can be due to the presence of hot tower. There may also be data integrity problems with LArg or Tile calorimeter. Please look at the calorimeter data quality variables and E-log entries to verify the exact conditions used for the particular run. If neither of the above is true, please contact the tau trigger expert on-call.
##            display = StatBox
##        }
##        hist hL1RoIPhi@Shifter {
##            output = HLT/OfflineShifter/Eta-Phi-Maps/Tau
##            algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##            reference = CentrallyManagedReferences
##            description = This distribution should be approximately flat. An excess of events at a particular phi (a peak) can be due to the presence of hot tower. There may also be data integrity problems with LArg or Tile calorimeter. Please look at the calorimeter data quality variables and E-log entries to verify the exact conditions used for the particular run. If neither of the above is true, please contact the tau trigger expert on-call.
##            display = StatBox
##        }
##      }
##      dir T2CaloTau {
##        hist hEtRawNarrow@Shifter {
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          display = StatBox
##          description = Smoothly falling exponential distribution. If you see a bumpy structure, check for any hot cells reported by L1Calo.
##          output = HLT/OfflineShifter/Et-Pt-Spectra/Tau
##        }
##        hist hEMRadius3S@Shifter {
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          display = StatBox
##          description = Distribution should have a peak close to zero and should smoothly fall at high values.
##          output = HLT/OfflineShifter/Misc/Tau
##        }
##        hist hEta@ShifterL2 {
##          output = HLT/OfflineShifter/Eta-Phi-Maps/Tau
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          display = StatBox
##        }
##        hist hPhi@ShifterL2 {
##            output = HLT/OfflineShifter/Eta-Phi-Maps/Tau
##            algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##            reference = CentrallyManagedReferences
##            display = StatBox
##        }
##        hist hEtaVsPhi@ShifterL2 {
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          description = Distribution should be uniform. https://twiki.cern.ch/twiki/bin/view/Atlas/TauSliceDataQualityMonitoring#h_EtaVsPhi
##          display = StatBox
##          output = HLT/OfflineShifter/Eta-Phi-Maps/Tau
##        }
##        hist hEMRadius3S@Shifter {
##          output = HLT/OfflineShifter/Misc/Tau
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          description = A measure of the shower size in eta-phi obtained from an energy weighted DR of the cells associated with the tau trigger candidate around the EF position. https://twiki.cern.ch/twiki/bin/view/Atlas/TauSliceDataQualityMonitoring#hEMRadius
##          display = StatBox
##        }
##      }
##      dir T2IDTau {
##        hist hNIsoTracks@Shifter {
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          display = StatBox
##          output = HLT/OfflineShifter/Multiplicities/Tau
##        }
##        hist hSumPtRatio@Shifter {
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          display = StatBox
##          output = HLT/OfflineShifter/Misc/Tau
##        }
##        hist hNCoreTracks@Shifter {
##          output = HLT/OfflineShifter/Multiplicities/Tau
##          algorithm = HLT_TAU_Histogram_Not_Empty&GatherData
##          reference = CentrallyManagedReferences
##          description = https://twiki.cern.ch/twiki/bin/view/Atlas/TauSliceDataQualityMonitoring#h_NCoreTracks
##          display = StatBox
##        }
##      }
##    }
##  }

    
##  dir MinBiasMon {
##    dir MBTS {
##    }
##        
##    dir IDMinbias {
##      hist IDMinBiasTriggerErrors@OfflineShifter {
##        output = HLT/OfflineShifter/Misc/MinBias/IDMinbias
##        reference = HLTminbias_Ref
##        algorithm = HLT_Histogram_Not_Empty&GatherData
##        description = Trigger error bits HLT. May be red for low stat runs or because the requested Minbias triggers are not included in the run (e.g. these triggers are not in use for normal physics runs with high pile-up/mu in order to avoid slowing down the run processing).
##      }
##    }
##  }
       
##    dir LUCID {
##    }
    
######### # no ZDC ######### 
#     dir ZDC { 
#       hist ZDC_P@OfflineShifter { 
#       output = HLT/OfflineShifter/Misc/MinBias/ZDC 
#       reference = HLTminbias_Ref 
#       algorithm = HLTminbias_Histogram_Not_Empty&GatherData 
#       description = This plot shows ZDC counts at L1 along with the requirement event to be triggered by MBTS (orthogonal triggers AND condition). May be red for low stat runs or because the requested Minbias triggers are not included in the run (e.g. these triggers are not in use for normal physics runs with high pile-up/mu in order to avoid slowing down the run processing). The reference may not match the current data, being updated accordingly while not influencing the test. 
#     } 
#       hist ZDC_F@OfflineShifter { 
#       output = HLT/OfflineShifter/Misc/MinBias/ZDC 
#       reference = HLTminbias_Ref 
#       algorithm = HLTminbias_Histogram_Not_Empty&GatherData 
#       description = This plot shows ZDC failures at L1 along with the requirement event to be triggered by MBTS (orthogonal triggers AND condition). May be red for low stat runs or because the requested Minbias triggers are not included in the run (e.g. these triggers are not in use for normal physics runs with high pile-up/mu in order to avoid slowing down the run processing). The reference may not match the current data, being updated accordingly while not influencing the test. 
#      } 
#    } ##########
#  }
}

##############
# Algorithms
##############

algorithm ShifterFermiFit {
  libname = libdqm_algorithms.so
  name = Simple_fermi_Fit
  thresholds = ShifterThreshold
  MinStat = 300
  #LikelihoodFit = 2.0
}

algorithm ShifterFermiFitOff {
  libname = libdqm_algorithms.so
  name = Simple_fermi_Fit
  thresholds = ShifterThresholdOff
  MinStat = 50
  #LikelihoodFit = 2.0
}

algorithm ShifterFermiFit100 {
  libname = libdqm_algorithms.so
  name = Simple_fermi_Fit
  thresholds = ShifterThreshold100
  MinStat = 300
  #LikelihoodFit = 2.0
}

algorithm ShifterFermiFit100_mu18_IDTrkNoCut_tight_pT_EF_eff {
  libname = libdqm_algorithms.so
  name = Simple_fermi_Fit
  thresholds = ShifterThreshold100
  MinStat = 1000
}

algorithm ShifterFermiFit100_tau125_IDTrkNoCut_pT_L2S_B_eff {
  libname = libdqm_algorithms.so
  name = Simple_fermi_Fit
  thresholds = ShifterThreshold100_tau125_IDTrkNoCut_pT_L2S_B_eff 
  MinStat = 300
}


# mu22 Shifter
algorithm TRMUO_fermi_fit_mu22_ESid_muFast_upstream_Fit {
  libname = libdqm_algorithms.so
  name = Simple_fermi_Fit_Graph
  thresholds = th_TRMUO_fermi_fit_mu22_ESid_muFast_upstream
  MinPoint = 50
  ImproveFit = 1.0
}


algorithm TRMUO_fermi_fit_mu22_ESid_muComb_upstream_Fit {
  libname = libdqm_algorithms.so
  name = Simple_fermi_Fit_Graph
  thresholds = th_TRMUO_fermi_fit_mu22_ESid_muComb_upstream
  MinPoint = 40
  ImproveFit = 1.0
}

algorithm TRMUO_fermi_fit_mu22_ESid_MuonEFCB_upstream_Fit {
  libname = libdqm_algorithms.so
  name = Simple_fermi_Fit_Graph
  thresholds = th_TRMUO_fermi_fit_mu22_ESid_MuonEFCB_upstream
  MinPoint = 40
  ImproveFit = 1.0
}

algorithm TRMUO_fermi_fit_mu22_ESid_MuGirlEF_upstream_Fit {
  libname = libdqm_algorithms.so
  name = Simple_fermi_Fit_Graph
  thresholds = th_TRMUO_fermi_fit_mu22_ESid_MuGirlEF_upstream
  MinPoint = 40
  ImproveFit = 1.0
}

###############
# Thresholds
###############

thresholds ShifterThreshold {
  limits Plateau {
    warning = 0.90
    error = 0.65
  }
#  limits Threshold {
#  }
#  limits Resolution {
#  }
}

thresholds ShifterThresholdOff {
  limits Plateau {
    warning = 0.50
    error = 0.25
  }
}

thresholds ShifterThreshold100 {
  limits Plateau {
    warning = 90.0
    error = 65.0
  }
}

thresholds ShifterThreshold100_tau125_IDTrkNoCut_pT_L2S_B_eff {
  limits Plateau {
    warning = 85.0
    error = 65.0
  }
}



#for Shift mu22
thresholds th_TRMUO_fermi_fit_mu22_ESid_muFast_upstream {
  limits Plateau {
    warning = 0.98
    error = 0.979
  }
  limits Threshold {
    warning = 22.0
    error   = 24.0
  }
  limits Resolution {
    warning = 3.0
    error   = 4.0
  }
}

thresholds th_TRMUO_fermi_fit_mu22_ESid_muComb_upstream {
  limits Plateau {
#    warning = 0.98
#   warning = 0.97 # 110909
    warning = 0.96
    error = 0.94
  }
  limits Threshold {
    warning = 22.0
    error   = 24.0
  }
  limits Resolution {
    warning = 3.0
    error   = 4.0
  }
}


thresholds th_TRMUO_fermi_fit_mu22_ESid_MuonEFCB_upstream {
  limits Plateau {
    warning = 0.98
    error = 0.979
  }
  limits Threshold {
    warning = 22.0
    error   = 24.0
  }
  limits Resolution {
    warning = 3.0
    error   = 4.0
  }
}

thresholds th_TRMUO_fermi_fit_mu22_ESid_MuGirlEF_upstream {
  limits Plateau {
#   warning = 0.96 # 110909 
    warning = 0.95
    error = 0.939
  }
  limits Threshold {
    warning = 22.0
    error   = 24.0
  }
  limits Resolution {
    warning = 3.0
    error   = 4.0
  }
}



